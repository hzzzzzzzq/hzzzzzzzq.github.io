<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="工作是修心的道场">
<meta property="og:type" content="website">
<meta property="og:title" content="Welcome">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Welcome">
<meta property="og:description" content="工作是修心的道场">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hzzzzzzzq">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Welcome</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Welcome</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">欢迎来到我的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="hzzzzzzzq"
      src="/images/my_avatoar.png">
  <p class="site-author-name" itemprop="name">hzzzzzzzq</p>
  <div class="site-description" itemprop="description">工作是修心的道场</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-12-Module-%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-12-Module-%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">ES 6 系列之Module 语法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:59:24 / 修改时间：13:02:19" itemprop="dateCreated datePublished" datetime="2022-01-18T12:59:24+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>在 ES 6 之前，社区制定了一些模块加载方案，最主要的就是 <a href=""><code>CommonJS</code></a> 和 AMD 两种。前者主要用于服务器，后者用于浏览器。ES 6 在语言层面上实现了模块功能，可以取代 <a href=""><code>CommonJS</code></a> 和 AMD 规范，成为了通用的模块解决方案。</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p><code>module</code> 主要由 <code>export</code> 和 <code>import</code> 两个命令。<code>export</code> 命令用于规定模块的对外接口，<code>import</code> 命令用于输入其他模块功能。<br>每一个模块都是一个独立文件，文件内的所有变量，外部无法获取，如果希望在外部获取，就必须使用 <code>export</code> 命令进行输出。<br>我们创建一个 <code>export.js</code> 文件，来写 <code>export</code> 相关内容，<code>import.js</code> 作为 <code>import</code> 导入相关内容。</p>
<h3 id="export-命令"><a href="#export-命令" class="headerlink" title="export 命令"></a>export 命令</h3><p>先看看 <code>export</code> 命令的写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> height = <span class="number">1.78</span>;</span><br></pre></td></tr></table></figure>

<p>上面是一种每一个都导出的写法，也可以看一下另外一种写法，使用一起导出的方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">const</span> height = <span class="number">1.78</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; name, age, height &#125;;</span><br></pre></td></tr></table></figure>

<p>两种写法是相同的。<br>当然 export 命令肯定不只是只能导出变量，还可以导出函数或者类。<br>来看看函数导出吧，还是用老朋友 <code>add</code> 来看吧。<br>当然， function 和 class 的输出，必须使用这样的格式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; add &#125;;</span><br></pre></td></tr></table></figure>

<p>在导出的时候，需要注意的是，<strong>导出的变量必须与模块内部的变量建立一一对应关系</strong>。</p>
<h3 id="import-命令"><a href="#import-命令" class="headerlink" title="import 命令"></a>import 命令</h3><p>使用 <code>import</code> 命令导入 <code>export.js</code> 文件，然后打印。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age, height, add &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name, age, height);</span><br><span class="line"><span class="comment">// hzzzzzzzq 18 1.78</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>如果想要自己重新命名，在 <code>import</code> 时，要使用 <code>as</code> 关键字，比如我将 <code>add</code> 改为 <code>sum</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add <span class="keyword">as</span> sum &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>需要注意的是</p>
<ul>
<li><code>import</code> 命令具有提升效果，会提升到整个模块的顶部，首先执行。</li>
<li><code>import</code> 是静态执行，不可以使用表达式或者变量</li>
<li>多次重复执行同一句 <code>import</code> ，那么只会执行一次，不会多次执行。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; name &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>; <span class="comment">// 与上一句相同</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">import</span> &#123; add, name &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="string">&#x27;a&#x27;</span> + <span class="string">&#x27;dd&#x27;</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>; <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h3 id="模块的整体加载"><a href="#模块的整体加载" class="headerlink" title="模块的整体加载"></a>模块的整体加载</h3><p>导入时，除了一个一个的导入，还有一种整体导入方式，就是使用( <code>*</code> )来指定一个对象。</p>
<p>我们来看看刚刚的全部导入方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> all <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(all.name, all.age, all.height); <span class="comment">// hzzzzzzzq 18 1.78</span></span><br><span class="line"><span class="built_in">console</span>.log(all.add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>这种方式，模块整体加载所在的那个对象，也就是 <code>all</code> 对象。</p>
<h3 id="export-default-命令"><a href="#export-default-命令" class="headerlink" title="export default 命令"></a>export default 命令</h3><p>导出还有一种 <code>export default</code> 命令，这种导出方式就是指定默认输出。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="comment">// 例子 类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> () </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="comment">// 例子 函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种导出方式，不需要固定的名称，来对应，可以直接使用匿名类或匿名函数，也可以不用匿名，但是导出时，都是可以任意命名。</p>
<p>导入时不需要使用 <code>&#123;&#125;</code> 来包裹，可以直接命名，使用任何名称命名导入。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子 类</span></span><br><span class="line"><span class="keyword">import</span> Obj <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Obj();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="comment">// 例子 函数</span></span><br><span class="line"><span class="keyword">import</span> add <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在正常开发当中，最常使用的一些 <code>export</code> 、<code>improt</code> 以及一些 <code>export default</code> 的方法。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-11-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8Basync%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-11-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8Basync%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">ES 6 系列之Async/await</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:59:13 / 修改时间：13:02:06" itemprop="dateCreated datePublished" datetime="2022-01-18T12:59:13+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><code>async</code> 函数时什么，其实就是 <code>Generator</code> 的语法糖，只需要将 <code>*</code> 改写成 <code>async</code>，<code>yield</code> 改写成 <code>await</code>。<br>我们来看看 <code>Generator</code> 的写法，与 <code>async</code> 的写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(fileName);</span><br><span class="line">      resolve(fileName); <span class="comment">// 需要给 `Promise` 一个状态转化，就是异步执行是否成功</span></span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">genator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName1&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName2&#x27;</span>, <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName3&#x27;</span>, <span class="number">3000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;打印完毕&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = genator();</span><br><span class="line">gen.next(); <span class="comment">// fileName1</span></span><br><span class="line">gen.next(); <span class="comment">// fileName2</span></span><br><span class="line">gen.next(); <span class="comment">// fileName3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName1&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName2&#x27;</span>, <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName3&#x27;</span>, <span class="number">3000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;执行完毕&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">asyncTest();</span><br><span class="line"><span class="comment">// fileName1</span></span><br><span class="line"><span class="comment">// fileName2</span></span><br><span class="line"><span class="comment">// fileName3</span></span><br><span class="line"><span class="comment">// 执行完毕</span></span><br></pre></td></tr></table></figure>

<p>从上面我们可以看出，我们需要手动调用 <code>next</code> 方法，来执行下一步。<br>而 <code>async</code> 有自己内置执行器。</p>
<p>我们来看看 <code>async</code> 对 <code>Generator</code> 的改进。</p>
<ul>
<li>内置执行器<br>Generator 函数执行需要 <code>next</code> 执行器，外面手动调用，所以有 <code>co</code> 模块，而 async 函数自带执行器，与普通函数一样，只需要一行调用。<br>下面代码中，调用了该函数之后，就会自动执行，输出最后结果。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asyncTest();</span><br></pre></td></tr></table></figure>

<ul>
<li><p>语义更好<br><code>async/await</code>，比起 <code>Generator</code> 函数的 <code>*</code> 与 <code>yield</code>，语义更清晰。 <code>async</code> 就表示异步，而 <code>await</code> 表示后面的表达式需要等待结果。</p>
</li>
<li><p>适用性更强<br><code>co</code> 模块约定，<code>yield</code> 后面只能是 <code>Thunk</code> 函数或者 <code>Promise</code> 对象，而 <code>await</code> 后面可以是 <code>Promise</code>，也可以是原始类型值。</p>
</li>
<li><p>返回值是 <code>Promise</code><br><code>async</code> 函数返回值是 <code>Promise</code> 对象，可以用 <code>then</code> 方法来进行下一步操作。<br><code>await</code> 命令就是内部 <code>then</code> 命令的语法糖。</p>
</li>
</ul>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><h3 id="返回-Promise-对象"><a href="#返回-Promise-对象" class="headerlink" title="返回 Promise 对象"></a>返回 Promise 对象</h3><ul>
<li><code>async</code> 函数返回一个 <code>Promise</code> 对象，可以使用 <code>then</code> 方法加入回调函数。</li>
<li>执行函数时，遇到 <code>await</code> 就会先返回，等异步操作结束，再继续执行函数体后面的语句。</li>
<li>必须等到内部所有 <code>await</code> 命令后面的 <code>Promise</code> 对象执行完毕，状态才会改变，除非遇到 <code>return</code> 或者报错。</li>
<li><code>async</code> 函数内部的异步操作执行完毕，就可以执行 <code>then</code> 方法。</li>
<li><code>JS</code> 没有休眠的语法，但是借助 <code>await</code> 命令就可以让程序停顿一定的时间。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">useAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// readFile 使用的是本文顶部的方法</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">useAsync().then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// fileName</span></span><br><span class="line"><span class="comment">// fileName</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果返回 <code>reject</code> 状态，则会中断执行，并通过 <code>catch</code> 捕获</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">useAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// readFile 使用的是本文顶部的方法</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;测试错误&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;打印？&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">useAsync()</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// 测试错误</span></span><br></pre></td></tr></table></figure>

<h3 id="await-命令"><a href="#await-命令" class="headerlink" title="await 命令"></a>await 命令</h3><p><code>await</code> 命令后面是一个 <code>Promise</code> 对象，返回结果。如果不是 <code>Promise</code>，就直接返回对应值。</p>
<ul>
<li><code>await</code> 命令只能出现在 <code>async</code> 命令函数内部，不然会报错。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">useAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">useAsync().then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p><code>await</code> 后面跟着 <code>add</code> 方法，算出一个数值 <code>3</code>，然后将值 <code>return</code> 出来。</p>
<hr>
<p>简单的 <code>await</code> 使用方法，就是如此。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-10-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BGenerator%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-10-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BGenerator%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">ES 6 系列之Generator 函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:57 / 修改时间：13:01:50" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:57+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><code>Generator</code> 是 <code>ES 6</code> 提供的一种异步编程解决方案。</p>
<ul>
<li>函数定义时，在 <code>funciton</code> 后面添加一个星号(<code>*</code>)</li>
<li>函数体内部使用 <code>yield</code> 表达式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generator</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Generator</code> 函数的调用方式与普通函数是一样的，在函数名后面加上一对圆括号。</p>
<h3 id="yield-表达式"><a href="#yield-表达式" class="headerlink" title="yield 表达式"></a>yield 表达式</h3><p><code>yield</code> 表达式就是 <code>Generator</code> 的暂停标志。</p>
<ul>
<li>遇到 <code>yield</code> 表达式，就会停止执行后面的操作，<code>yield</code> 后面表达式的值，作为返回对象的 <code>value</code> 属性值</li>
<li>下次调用 <code>next</code> 方法时，才会继续执行代码，直到下一个 <code>yield</code></li>
<li>如果没有遇到遇到 <code>yield</code>，则运行至结束，看是否有 <code>return</code>，如果有，则 <code>return</code> 后面的值作为返回对象的 <code>value</code></li>
<li>如果没有 <code>yield</code> 或 <code>return</code>，则返回 <code>value</code> 为 <code>undefined</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>; <span class="comment">// 第一个 next 时，执行</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>; <span class="comment">// 第二个 next 时，执行</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span>; <span class="comment">// 第三个 next 时，执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们可以来感受上面的用途。</p>
<p>只有在调用 <code>next</code> 方法将指针移到这一句时，才会进行求值。</p>
<p>与 <code>return</code> 不同的地方在于，<code>return</code> 不具备记忆功能，也就说，在一个函数中，<code>return</code> 只能执行一次，而 yield 具备记忆功能，可以通过 <code>next</code> 方法继续执行代码。</p>
<h2 id="next-方法"><a href="#next-方法" class="headerlink" title="next 方法"></a>next 方法</h2><h3 id="next-普通使用"><a href="#next-普通使用" class="headerlink" title="next 普通使用"></a>next 普通使用</h3><p><code>next</code> 方法就是 <code>generator</code> 函数的内置执行器，如果遇到 <code>yield</code> 时，只有通过调用 <code>next</code>，才会继续执行代码。</p>
<p>而 <code>next</code> 代码的执行值，我们可以打印来看，会是一个对象，带有 <code>value</code> 和 <code>done</code> 两个属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: &#x27;hello&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: &#x27;hzzzzzzzq&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: &#x27;good&#x27;, done: true &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>value</code> 值显示的是 <code>yield</code> 或者 <code>return</code> 后面的返回值。</li>
<li><code>done</code> 是一个布尔值，表示遍历是否结束，<code>true</code> 表示结束。</li>
<li>当然，<code>return</code> 只能有一个，且 <code>return</code> 之后不能有 <code>yield</code>，因为 <code>return</code>，就会让 <code>done</code> 变成 <code>true</code>。</li>
</ul>
<h3 id="next-方法参数"><a href="#next-方法参数" class="headerlink" title="next 方法参数"></a>next 方法参数</h3><p><code>next</code> 方法可以带一个参数，<strong>该参数会被当作上一个 <code>yield</code> 表达式的值</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">yield</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="built_in">console</span>.log(gen.next());</span><br><span class="line"><span class="built_in">console</span>.log(gen.next(<span class="string">&#x27;world&#x27;</span>));</span><br><span class="line"><span class="comment">// &#123; value: null, done: false &#125;</span></span><br><span class="line"><span class="comment">// world</span></span><br><span class="line"><span class="comment">// &#123; value: &#x27;null&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<p>当然，这个是会被当作上一个 <code>yield</code> 表达式的值，是在函数内部使用，并不是在 <code>next</code> 返回对象中作为 <code>value</code> 的键值返回。他会替换 <code>generator</code> 函数体内的上一个 <code>yield</code> 值并赋值给我们定义的变量 <code>value</code>。</p>
<h2 id="for…of-循环"><a href="#for…of-循环" class="headerlink" title="for…of 循环"></a>for…of 循环</h2><p><code>for...of</code> 循环可以自动遍历 <code>Generator</code> 函数运行时生成的 <code>Interator</code> 对象，不需要手动调用 <code>next</code> 方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;one&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;two&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;three&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;four&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;five&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> gen()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// one two three four</span></span><br></pre></td></tr></table></figure>

<p>注意：如果 <code>done</code> 为 <code>true</code>，则会被立刻终止，所有最后一句 <code>return</code> 语句不在循环中。</p>
<p>处理 <code>for...of</code> 循环之外，扩展运算符，解构赋值和 <code>Array.from</code> 方法内部调用的，都是遍历器接口。<br>都可以将 <code>Generator</code> 函数作为返回的 <code>Interator</code> 对象，作为参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;one&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;two&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;three&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;four&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;five&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log([...gen()]);</span><br><span class="line"><span class="comment">// [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, &#x27;four&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from(gen()));</span><br><span class="line"><span class="comment">// [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, &#x27;four&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y, z] = gen();</span><br><span class="line"><span class="built_in">console</span>.log(x, y, z);</span><br><span class="line"><span class="comment">// one two three</span></span><br></pre></td></tr></table></figure>

<h2 id="yield"><a href="#yield" class="headerlink" title="yield*"></a>yield*</h2><p><code>yield*</code> 就是 用来在一个 <code>Generator</code> 函数里面执行另一个 <code>Generator</code> 函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span>* generator1();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// hello</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// hzzzzzzzq</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// good</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>我们在 <code>generator</code> 函数中，使用了 <code>yield*</code> ，后面调用 <code>generator1</code> 函数。</p>
<p>然后我们就可以直接使用 <code>next</code> 函数，跟普通的 <code>generator</code> 函数一样使用就可以。</p>
<h2 id="Generator-prototype-throw-return"><a href="#Generator-prototype-throw-return" class="headerlink" title="Generator.prototype.throw() / return()"></a>Generator.prototype.throw() / return()</h2><h3 id="throw"><a href="#throw" class="headerlink" title="throw()"></a>throw()</h3><p><code>Generator</code> 函数返回的遍历器对象，都会有个 <code>throw</code> 方法，可以在函数体外抛出错误，然后在 <code>Generator</code> 函数体内捕获。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;内部&#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> gen = generator();</span><br><span class="line">gen.next();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  gen.throw(<span class="string">&#x27;错误1&#x27;</span>);</span><br><span class="line">  gen.throw(<span class="string">&#x27;错误2&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;外部&#x27;</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 内部 错误1</span></span><br><span class="line"><span class="comment">// 外部 错误2</span></span><br></pre></td></tr></table></figure>

<p>在上面的例子中，我们可以看出，第一个 <code>throw</code> 被函数体内部的 <code>catch</code> 语句捕获，然而第二个错误，在内部已经执行过 <code>catch</code>，所有这个错误就被抛出来了，被外面的 <code>try...catch</code> 捕获。</p>
<h3 id="return"><a href="#return" class="headerlink" title="return()"></a>return()</h3><p><code>Generator</code> 函数返回的对象中，还有一个 <code>return</code> 方法，可以返回给定的值，并且结束 <code>Generator</code> 函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line">gen.next(); <span class="comment">// &#123; value: &#x27;hello&#x27;, done: false &#125;</span></span><br><span class="line">gen.return(<span class="string">&#x27;world&#x27;</span>); <span class="comment">// &#123; value: &#x27;world&#x27;, done: true &#125;</span></span><br><span class="line">gen.next(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<p>从上面的例子，我们可以看出，执行 <code>return</code> 之后，后面的 <code>done</code> 就会变为 <code>true</code>，且传入的参数会作为返回对象的 <code>value</code> 值。</p>
<p>在以后调用时，都会被调整为 <code>undefined</code>，其实就相当于，将 <code>generator</code> 函数中的添加一个 <code>return</code> 。</p>
<h2 id="Generator-函数的异步操作"><a href="#Generator-函数的异步操作" class="headerlink" title="Generator 函数的异步操作"></a>Generator 函数的异步操作</h2><p>我们使用一个 <code>readFile</code>，使用 <code>setTimeout</code> 假装调用接口，然后调用 <code>gen.next()</code> 接口返回对象的 <code>value</code> 属性值进行下一步操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">&#x27;异步请求成功回调&#x27;</span>); <span class="comment">// 需要给 `Promise` 一个状态转化，就是异步执行是否成功</span></span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> str = <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName1&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="keyword">const</span> result = gen.next(); <span class="comment">// fileName1</span></span><br><span class="line">result.value</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">val2</span>) =&gt;</span> &#123;</span><br><span class="line">    gen.next(<span class="string">&#x27;异步请求结果&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// 异步请求成功回调</span></span><br><span class="line"><span class="comment">// 异步请求结果</span></span><br></pre></td></tr></table></figure>

<p><code>yield</code> 后面用来调用异步函数，然后返回结果输出。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-9-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BPromise-%E5%AF%B9%E8%B1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-9-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BPromise-%E5%AF%B9%E8%B1%A1/" class="post-title-link" itemprop="url">ES 6 系列之Promise 对象</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:47 / 修改时间：13:01:37" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:47+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h2><p><strong>Promise 是异步编程的一种解决方案</strong>，在 <code>Promise</code> 之前，采用的是回调函数和事件，但是会存在一些问题，像回调地狱。而在 ES6 中，提供了 <code>Promise</code> 对象。</p>
<p><code>Promise</code> 简单来讲，其实就是一个容器，用来存储异步事件（例如网络请求等）。</p>
<p>语法上来说，<code>Promise</code> 是一个对象，可以获取异步操作的消息。</p>
<h3 id="主要特点"><a href="#主要特点" class="headerlink" title="主要特点"></a>主要特点</h3><ul>
<li>对象状态不受外界影响。<ul>
<li>一共只有三种状态：<code>pending</code> （进行中）、<code>fulfilled</code>（完成）和 <code>rejected</code>（失败）。只受异步操作的结果，可以决定当前是哪种状态，其他任何操作都无法改变这个状态。</li>
</ul>
</li>
<li>一旦状态改变，就不能再变，任何时候都可以得到这个结果。<ul>
<li>Promise 对象状态改变只有两种可能性，从<code>pending</code> 到 <code>fulfilled</code> 和从 <code>pending</code> 到 <code>rejected</code>。</li>
</ul>
</li>
</ul>
<h3 id="主要缺陷"><a href="#主要缺陷" class="headerlink" title="主要缺陷"></a>主要缺陷</h3><ul>
<li>一旦创建会立即执行，无法中途取消。</li>
<li>如果内部不设置回调函数，外部是不能知道内部情况的。</li>
<li>当状态处于 <code>pending</code> 时，无法得知目前进展到哪个阶段。</li>
</ul>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>这里一般需要进行异步操作，但是为了学习方便，我们直接同步进行了。<br><code>Promise</code> 构造函数接受一个函数作为参数，该函数的参数为 <code>resolve</code> 和 <code>reject</code>。 <code>resolve</code> 和 <code>reject</code> 是两个函数，有 JS 引擎提供，不需要自己部署。<br><code>resolve</code> 函数作用是将 <code>Promise</code> 的状态从 <code>pending</code> 变为 <code>resolved</code>，并且将操作结果作为参数传递出去。<br><code>reject</code> 函数作用是将 <code>Promise</code> 的状态从 <code>pending</code> 变为 <code>rejected</code>，并且将错误信息传递出去。<br><code>Promise</code> 生成实例之后，可以调用 <code>then</code> 方法，其中包含两个函数参数。第一个函数包含 <code>resolved</code> 状态的结果，第二个包含 <code>rejected</code> 状态结果。两个函数都是可选参数。</p>
<p>我们将 <code>flag</code> 比做异步操作，<code>true</code> 表示异步成功，<code>false</code> 表示异步失败。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(</span><br><span class="line">  <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;value = &#x27;</span>, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;error = &#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>从上面的代码来看，<code>flag</code> 为 <code>true</code> 时，会打印 <code>value = 操作成功</code>，为 false 时，打印 <code>error = 操作失败</code>。</p>
<p>我们来看看 <code>then</code> 的异步。<br>在 <code>Promise</code> 创建时，就会立即执行，而 <code>then</code> 会在当前脚本所有同步任务执行完才会执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line"><span class="comment">// &#x27;1&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;3&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;2&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><h3 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h3><p><code>Promise.prototype.then()</code> 方法作用是为 <code>Promise</code> 实例添加状态改变时的回调函数。<br><code>then</code> 方法的第一个参数是 <code>resolved</code> 状态的回调函数，第二个参数是 <code>rejected</code> 状态的回调函数，它们都是可选的值，不一定必须传入。</p>
<p><code>then</code> 方法返回的是一个新的 <code>Promise</code> 实例，所以可以采用链式写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// &#x27;1&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h3><p><code>Promise.prototype.catch()</code> 方法就是在 <code>then</code> 方法时 <code>reject</code> 的情况，用于发生错误时的回调函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#x27;1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果在 <code>Promise</code> 中报错，进行错误抛出，状态会变为 <code>rejected</code>，就会调用 <code>catch()</code> 方法指定的回调函数，然后在其中处理错误。</p>
<p>当然，如果在运行过程中，抛出错误，也会被 <code>catch</code> 捕获。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Error&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#x27;Error&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h3><p><code>Promise.prototype.finally()</code> 方法不管 <code>Promise</code> 对象最后状态如何，都会进行执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise1.finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;执行finally&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 执行finally</span></span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;失败&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise2.finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;执行finally&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 执行finally</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise-类方法"><a href="#Promise-类方法" class="headerlink" title="Promise 类方法"></a>Promise 类方法</h2><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><p><code>Promise.all()</code> 方法可以将多个 <code>Promise</code> 实例，包装成一个新的 <code>Promise</code> 实例。</p>
<ul>
<li>多个 <code>Promise</code> 中，其中一个状态不是 <code>fulfilled</code>，p 的结果就不会是 <code>fulfilled</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.all([promise1, promise2, promise3]);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>只要有一个状态变为 <code>rejected</code>，此时<strong>第一个</strong>被 <code>reject</code> 的实例的返回值，会被传递为 <code>promise</code> 的回调函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们将上面的代码其中一个 resolve 修改为 reject(&#x27;1&#x27;)</span></span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.all([promise1, promise2, promise3]);</span><br><span class="line"></span><br><span class="line">promise.then(</span><br><span class="line">  <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error); <span class="comment">// 3</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h3><p><code>Promise.race()</code> 方法同样是将多个实例包装为一个新的 <code>Promise</code> 实例。</p>
<ul>
<li>多个 <code>Promise</code> 时，哪一个率先改变状态，<code>promise</code> 的状态就跟着哪个改变。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.race([promise1, promise2, promise3]);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>我们在第一个使用了 <code>setTimeout</code>，进行延迟，所以会是第二个的状态先改变，输出第二个的值。</p>
<h3 id="Promsie-allSettled"><a href="#Promsie-allSettled" class="headerlink" title="Promsie.allSettled()"></a>Promsie.allSettled()</h3><p><code>Promise.allSettled()</code> 方法，用来确定一组异步操作是否都结束了。<br>数组的每个成员都是一个 Promise 对象，并返回一个新的 <code>Promise</code> 对象，只有数组中的 <code>Promsie</code> 对象状态都发生改变时，返回的 <code>Promise</code> 对象才发生改变。<br>返回的值会接收到一个数组作为参数，该数组的每一个成员对应前面数组的每个 <code>Promise</code> 对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.allSettled([promise1, promise2, promise3]);</span><br><span class="line">promise.then(</span><br><span class="line">  <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     status: &#x27;rejected&#x27;,</span></span><br><span class="line"><span class="comment">//     reason: &#x27;1&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     status: &#x27;fulfilled&#x27;,</span></span><br><span class="line"><span class="comment">//     value: &#x27;2&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     status: &#x27;rejected&#x27;,</span></span><br><span class="line"><span class="comment">//     reason: &#x27;3&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">// ];</span></span><br></pre></td></tr></table></figure>

<p>数组成员对象的 <code>status</code> 属性的值只可能是 <code>fulfilled</code> 或 <code>rejected</code>，用来区别异步操作结果是成功(<code>fulfilled</code>)还是失败(<code>rejected</code>)。<br>如果是成功是会有 <code>value</code> 属性，记录成功值，如果失败，会有 <code>reason</code> 属性，记录失败原因。</p>
<h3 id="Promise-any"><a href="#Promise-any" class="headerlink" title="Promise.any()"></a>Promise.any()</h3><p><code>Promise.any()</code> 方法，将一组 <code>Promise</code> 实例作为参数，包装成一个新的 <code>Promise</code> 实例并返回。</p>
<ul>
<li>只要有一个变成 <code>fulfilled</code> 状态，新实例就会被包装成 <code>fulfilled</code> 状态</li>
<li>如果所有参数实例都变成 <code>rejected</code> 状态，包装实例就会变成 <code>rejected</code> 状态</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Promise</span>.any([promise1, promise2, promise3])</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 只要有一个成功</span></span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve()"></a>Promise.resolve()</h3><p><code>Promise.resolve()</code> 方法有四种情况。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;请求成功&#x27;</span>);</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> resolve(<span class="string">&#x27;请求成功&#x27;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>参数为 <code>Promise</code> 时，不做任何修改，直接返回这个实例。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> resolve(<span class="string">&#x27;请求成功&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="built_in">Promise</span>.resolve(promise);</span><br><span class="line">promise1.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>参数是 <code>thenable</code> 对象<br><code>thenable</code> 对象就是有 <code>then</code> 方法的对象。<br><code>Promise.resolve()</code> 方法会将 <code>thenable</code> 转为 <code>Promise</code> 对象，并立即执行其中的 <code>then</code> 方法。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thenable = &#123;</span><br><span class="line">  <span class="attr">then</span>: <span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    resolve(<span class="string">&#x27;成功&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve(thenable);</span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 成功</span></span><br></pre></td></tr></table></figure>

<ul>
<li>参数无 <code>then</code> 的对象，或不是对象的参数<br><code>Promise.resolve()</code> 方法返回一个心的 Promise 对象，状态转为 <code>resolved</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;成功&#x27;</span>);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 成功</span></span><br></pre></td></tr></table></figure>

<ul>
<li>不带参数<br><code>Promise.resolve()</code> 方法可以不传参数，直接返回一个 <code>resolved</code> 状态的 <code>Promise</code> 对象。<br>所以在希望得到一个 <code>Promise</code> 对象，直接调用比较该方法方便。</li>
</ul>
<p>注意，立即 <code>resolve()</code> 的 <code>Promise</code> 对象，是在本轮<a href="">事件循环（event loop）</a>的结束时执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve();</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;不带参数&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 事件循环</span></span><br><span class="line"><span class="comment">// 不带参数</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;事件循环&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject()"></a>Promise.reject()</h3><p><code>Promise.reject()</code> 方法返回一个新 <code>Promise</code> 实例，该实例状态为 <code>rejected</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.reject(<span class="string">&#x27;出错了的Promise&#x27;</span>);</span><br><span class="line"><span class="comment">// 同价</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;出错了的Promise&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="literal">null</span>, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 出错了的Promise</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-8-Set-%E5%92%8C-Map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-8-Set-%E5%92%8C-Map/" class="post-title-link" itemprop="url">ES 6 系列之Set 和 Map</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:41 / 修改时间：13:01:22" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:41+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p><code>Set</code> 是 <code>ES 6</code> 提供的新的数据结构。类似于数组，但是都是唯一值，没有重复值。<br><code>Set</code> 就是一个构造函数，用来生成 <code>Set</code> 数据结构。<br><code>add()</code> 就是为 <code>Set</code> 添加成员，我们来试试。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">set.add(<span class="number">1</span>);</span><br><span class="line">set.add(<span class="number">2</span>);</span><br><span class="line">set.add(<span class="number">3</span>);</span><br><span class="line">set.add(<span class="number">2</span>);</span><br><span class="line">set.add(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> s <span class="keyword">of</span> set) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>

<p>代码中可以看出 <code>Set</code> 的数据结构，是不会添加重复的值。</p>
<p><code>Set</code> 构造函数可以接受一个数组或者具有 iterable 接口的其他数据结构作为参数，用来初始化 <code>Set</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set);</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<p>从这里，我们也可以看出，用于数组去重是一个很好的选择</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> arr1 = [...new <span class="built_in">Set</span>(arr)];</span><br><span class="line"><span class="built_in">console</span>.log(arr1);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h3 id="Set-实例属性和方法"><a href="#Set-实例属性和方法" class="headerlink" title="Set 实例属性和方法"></a>Set 实例属性和方法</h3><p><strong>实例属性</strong></p>
<ul>
<li><code>Set.prototype.constructor</code>: 构造函数，默认就是 <code>Set()</code>。</li>
<li><code>Set.prototype.size</code>: 返回 <code>Set</code> 成员总数。</li>
</ul>
<p><strong>实例方法</strong></p>
<ul>
<li><code>Set.prototype.add(value)</code>: 添加元素到 <code>Set</code>，返回 <code>Set</code> 本身。</li>
<li><code>Set.prototype.delete(value)</code>: 删除某个值，返回一个布尔值。</li>
<li><code>Set.prototype.has(value)</code>: 返回一个布尔值，表示该值是否为 <code>Set</code> 的值。</li>
<li><code>Set.prototype.clear()</code>: 清除所有值。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">set.add(<span class="number">1</span>);</span><br><span class="line">set.add(<span class="number">5</span>);</span><br><span class="line">set.add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set.size); <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">5</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">2</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">set.delete(<span class="number">5</span>);</span><br><span class="line">set.delete(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">5</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">4</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="遍历操作"><a href="#遍历操作" class="headerlink" title="遍历操作"></a>遍历操作</h3><p>四个遍历方法。</p>
<ul>
<li><code>Set.prototype.keys()</code>: 返回 <code>key</code> 的遍历器</li>
<li><code>Set.prototype.values()</code>: 返回 <code>value</code> 的遍历器</li>
<li><code>Set.prototype.entries()</code>: 返回 <code>key: values</code> 的遍历器</li>
<li><code>Set.prototype.forEach()</code>: 回调函数遍历，类似数组的 <code>forEach</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&#x27;key1&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>, <span class="string">&#x27;key3&#x27;</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> set.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1</span></span><br><span class="line"><span class="comment">// key2</span></span><br><span class="line"><span class="comment">// key3</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> set.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1</span></span><br><span class="line"><span class="comment">// key2</span></span><br><span class="line"><span class="comment">// key3</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> set.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(k, v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1 key1</span></span><br><span class="line"><span class="comment">// key2 key2</span></span><br><span class="line"><span class="comment">// key3 key3</span></span><br><span class="line"></span><br><span class="line">set.forEach(<span class="function">(<span class="params">val, key</span>) =&gt;</span> <span class="built_in">console</span>.log(key, val));</span><br><span class="line"><span class="comment">// key1 key1</span></span><br><span class="line"><span class="comment">// key2 key2</span></span><br><span class="line"><span class="comment">// key3 key3</span></span><br></pre></td></tr></table></figure>

<p>由遍历，我们可以看出，<code>key</code> 与 <code>value</code> 的值是相同的。</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p><code>ES 6</code> 提供了 <code>Map</code> 数据结构。类似于对象，也是键值对的集合，但是 <code>key</code> 不限制于字符串，其他类型的值均可以作为 <code>key</code>。 简单来说 <code>Map</code> 结构提供了 <code>val - val</code>，而对象必须是 <strong>字符串 - val</strong>。</p>
<p><code>map</code> 的简单用法。也看看将对象作为 <code>key</code> 的时候。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">map.set(obj, <span class="string">&#x27;object&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(obj)); <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line">map.set(<span class="string">&#x27;string&#x27;</span>, <span class="string">&#x27;hello hzzzzzzzq&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// &#x27;hello hzzzzzzzq&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.has(obj)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>上面我们就可以看出，我们将对象 <code>obj</code> 作为一个<code>Map</code> 的键传入，使用 <code>get</code> 获取值，<code>delete</code> 删除，<code>has</code> 作为判断是否有这个值。</p>
<p>我们在来看看，<code>Map</code> 作为构造函数，怎么添加成员。<br>其实在<a href="">对象的扩展</a>中，我们已经提到过了。</p>
<ul>
<li>接受数组作为参数，而数组的成员是一个个表示键值对的数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>],</span><br><span class="line">]);</span><br><span class="line"><span class="built_in">console</span>.log(map.size); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>任何具有 <code>Iterator</code> 接口，且每个成员都是一个双元素的数组的结构都可以当作 <code>Map</code> 的参数。<code>Set</code> 和 <code>Map</code> 自身也可以作为参数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([[<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>]]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>(set);</span><br><span class="line"><span class="built_in">console</span>.log(map1.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map2.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map3 = <span class="keyword">new</span> <span class="built_in">Map</span>(map2);</span><br><span class="line"><span class="built_in">console</span>.log(map3.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map 与 Set 类似，如果有重复 <code>key</code> 时，后面的 <code>val</code> 会覆盖前面的 <code>val</code>，也就是说，<code>map</code> 也是唯一的。</li>
<li>Map 中若是没有找到这个 <code>key</code>，则返回 <code>undefined</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="Map-属性和操作"><a href="#Map-属性和操作" class="headerlink" title="Map 属性和操作"></a>Map 属性和操作</h3><ul>
<li>size<br><code>size</code> 返回 <code>Map</code> 的成员数量。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.size); <span class="comment">// 1</span></span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.size); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.set(key, val)<br><code>set(key, val)</code> 方法就是为 Map 添加新的值了。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>); <span class="comment">// 键是字符串</span></span><br><span class="line">map.set(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 键是数值</span></span><br><span class="line">map.set(<span class="literal">undefined</span>, <span class="number">3</span>); <span class="comment">// 键是 undefined</span></span><br><span class="line">map.set(<span class="literal">null</span>, <span class="number">4</span>); <span class="comment">// 键时 null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="number">1</span>)); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="literal">undefined</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="literal">null</span>)); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.get(key)<br><code>get(key)</code> 方法获取 <code>key</code> 对应的 <code>val</code>，找不到则返回 undefined。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.has(key);<br><code>has(key)</code> 方法判断键名 <code>key</code> 是否在 <code>Map</code> 对象中。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.delete(key)<br><code>delete(key)</code> 方法删除某个键，返回一个布尔值，成功为 <code>true</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.clear();<br><code>clear()</code> 就是清除 Map 对象的所有成员。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">map.clear();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><p>与 <code>Set</code> 类似。</p>
<ul>
<li>Map.prototype.keys()： 返回 <code>Map</code> 对象的所有 <code>key</code>。</li>
<li>Map.prototype.values()：返回 <code>Map</code> 对象的所有 <code>val</code>。</li>
<li>Map.prototype.entries()：返回 <code>Map</code> 对象的所有成员的遍历器。</li>
<li>Map.prototype.forEach()：遍历 <code>Map</code> 的所有成员。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">map.set(<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> map.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> map.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(k, v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27; 1</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27; 2</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27; 3</span></span><br><span class="line"></span><br><span class="line">map.forEach(<span class="function">(<span class="params">val, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#x27;x&#x27; 1</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27; 2</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27; 3</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">ES 6 系列之对象的扩展</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:23 / 修改时间：13:01:05" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:23+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="属性的简单表示"><a href="#属性的简单表示" class="headerlink" title="属性的简单表示"></a>属性的简单表示</h2><p><code>ES 6</code> 允许将属性写在 <code>&#123;&#125;</code> 中，直接写入变量和函数，作为对象的属性和方法。这样的书写方式更加简洁。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="string">&#x27;foo&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123; foo, getName &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; foo: &#x27;foo&#x27;, getName: ƒunction &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES 6</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="string">&#x27;foo&#x27;</span>,</span><br><span class="line">  <span class="attr">getName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; foo: &#x27;foo&#x27;, getName: function &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="属性的可枚举性和遍历"><a href="#属性的可枚举性和遍历" class="headerlink" title="属性的可枚举性和遍历"></a>属性的可枚举性和遍历</h2><h3 id="可枚举性"><a href="#可枚举性" class="headerlink" title="可枚举性"></a>可枚举性</h3><p>对象的每个属性都有一个描述对象，用来控制该属性的行为。<br><code>Object.getOwnPropertyDescriptor</code> 方法来获取该属性的描述对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj));</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   &quot;value&quot;: 1,</span></span><br><span class="line"><span class="comment">//   &quot;writable&quot;: true,</span></span><br><span class="line"><span class="comment">//   &quot;enumerable&quot;: true,</span></span><br><span class="line"><span class="comment">//   &quot;configurable&quot;: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>描述对象的 <code>enumerable</code> 属性，称为<strong>可枚举性</strong>，如果该属性为 <code>false</code>，就会被某些操作忽略。</p>
<p>操作会忽略 <code>enumerable</code> 为 <code>false</code> 的属性。</p>
<ul>
<li><code>for...in</code> 循环：遍历对象自身和继承的可枚举属性。</li>
<li><code>Object.keys()</code>：返回对象所有可枚举的属性的 <code>key</code>。</li>
<li><code>JSON.stringify()</code>：只串行化对象自身的可枚举的属性。</li>
<li><code>Object.assign()</code>：只拷贝对象自身的可枚举属性。</li>
</ul>
<h3 id="属性遍历"><a href="#属性遍历" class="headerlink" title="属性遍历"></a>属性遍历</h3><ul>
<li><strong>for…in</strong><br><code>for...in</code> 循环对象自身的和继续的可枚举属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> o <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Object.keys(obj)</strong><br><code>Object.keys(obj)</code> 返回一个数组，包含所有可枚举属性的 <code>key</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> o <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Object.getOwnPropertyNames(obj)</strong><br><code>Object.getOwnPropertyNames(obj)</code> 返回一个数组，包含对象自身的所有属性的 <code>key</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> o <span class="keyword">of</span> <span class="built_in">Object</span>.getOwnPropertyNames(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Object.getOwnPropertySymbols(obj)</strong><br><code>Object.getOwnPropertySymbols(obj)</code> 返回一个数组，包含对象自身的所有 <code>Symbol</code> 属性的 <code>key</code>。<br>打印的属性均为 <code>Symbol</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>(<span class="string">&#x27;x&#x27;</span>)]: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(obj));</span><br><span class="line"><span class="comment">// [Symbol(x)]</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Reflect.ownKeys(obj)</strong><br><code>Reflect.ownKeys(obj)</code> 返回一个数组，包含对象自身所有键名，不管键名是 <code>Symbol</code> 或字符串，也不管是否可枚举。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>(<span class="string">&#x27;x&#x27;</span>)]: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>, <span class="number">1</span>: <span class="number">10</span>, <span class="number">2</span>: <span class="number">11</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(obj));</span><br><span class="line"><span class="comment">// [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;y&#x27;, &#x27;z&#x27;, Symbol(x)]</span></span><br></pre></td></tr></table></figure>

<p>一共五种遍历 <code>key</code> 的方式，但是遍历的次序是有规则的。</p>
<blockquote>
<ul>
<li>首先遍历所有数值，并按照升序排列</li>
<li>其次遍历字符串，按照加入时间升序</li>
<li>最后才是 <code>Symbol</code>，按照加入时间升序</li>
</ul>
</blockquote>
<h2 id="对象的扩展运算符"><a href="#对象的扩展运算符" class="headerlink" title="对象的扩展运算符"></a>对象的扩展运算符</h2><p>在 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">解构赋值</a> 和 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/7">数组的扩展</a> 中，我们分别提到过对象的解构赋值以及扩展运算符。</p>
<p>我们来看看扩展运算符在对象中的使用。</p>
<h3 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h3><p>我们来回顾一下 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">解构赋值</a> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; x, y &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(y); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用扩展运算符时需要注意的是，解构赋值必须是最后一个参数且只能有一个，否则报错。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; x, ...obj &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; y: 1, z: 2 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; ...obj, z &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对象的解构赋值右侧不能是 <code>undefined</code> 或 <code>null</code>，会报错</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ...obj &#125; = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ...obj &#125; = <span class="literal">undefined</span>;</span><br><span class="line"><span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure>

<h3 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h3><p>对象的扩展运算符用于取出参数对象的所有可便利属性，拷贝到当前对象之中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; ...obj &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; x: 1, y: 2 &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组也是特殊的对象，所以对象的扩展运算符也可以用于数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ...[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>] &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">// &#123; 0: &#x27;1&#x27;, 1: &#x27;2&#x27;, 2: &#x27;3&#x27; &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果是空对象，则没有任何效果。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ...&#123;&#125;, <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; x: 1 &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果扩展运算符并不是对象，则会被自动转化成对象，但是部分值没有自身属性，所以会返回一个空对象 <code>&#123;&#125;</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ..<span class="number">.1</span> &#125;; <span class="comment">// 等同于 &#123; ...Object(1) &#125;</span></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; ...true &#125;; <span class="comment">// &#123; ...Object(true) &#125;</span></span><br><span class="line"><span class="keyword">const</span> obj3 = &#123; ...undefined &#125;; <span class="comment">// &#123; ...Object(undefined) &#125;</span></span><br><span class="line"><span class="keyword">const</span> obj4 = &#123; ...null &#125;; <span class="comment">// &#123; ...Object(null) &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果后面跟着字符串，则会自动转成类数组对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ...<span class="string">&#x27;hzq&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; 0: &#x27;h&#x27;, 1: &#x27;z&#x27;, 2: &#x27;q&#x27; &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="对象新增的常用实例方法"><a href="#对象新增的常用实例方法" class="headerlink" title="对象新增的常用实例方法"></a>对象新增的常用实例方法</h2><h2 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is()"></a>Object.is()</h2><p><code>Object.is()</code> 是用来判断两个是否严格相等，与严格比较运算符 <code>===</code> 行为基本一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(&#123;&#125;, &#123;&#125;)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="与-不同点"><a href="#与-不同点" class="headerlink" title="与 === 不同点"></a>与 <code>===</code> 不同点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(+<span class="number">0</span> === -<span class="number">0</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> === <span class="literal">NaN</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(+<span class="number">0</span>, -<span class="number">0</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h2><p><code>Object.assign()</code> 放啊主要用于对象的合并，<strong>将对象的所有可枚举属性复制到目标对象</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(obj, obj1, obj2);</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">// &#123; x: 1, y: 2 &#125;</span></span><br></pre></td></tr></table></figure>

<p>从上面我们可以看出，第一个参数就是<strong>目标对象</strong>，将后面对象的所有<strong>可枚举属性</strong>复制到第一个参数。</p>
<ul>
<li>如果后面参数中，有同名属性，则目标对象中的值，会被新的对象替代</li>
<li>如果只有一个参数，则直接返回该参数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">y</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(obj, obj1, obj2);</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">// &#123; x: 3, y: 4 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj3 = &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(obj3) === obj3);</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果参数不是对象，会被转成对象，然后返回</li>
<li><code>undefined</code> 和 <code>null</code> 无法转成对象，会报错</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// Number &#123;1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>.assign(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="literal">undefined</span>)); <span class="comment">// 报错</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="literal">null</span>)); <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h2 id="Object-keys-，Object-values-，Object-entries"><a href="#Object-keys-，Object-values-，Object-entries" class="headerlink" title="Object.keys()，Object.values()，Object.entries()"></a>Object.keys()，Object.values()，Object.entries()</h2><h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a>Object.keys()</h3><p><code>Obejct.keys()</code> 是 <code>ES 5</code> 引入的，我们还是在这里稍微提一下。<strong>Object.keys()返回对象键值的数组，然后用来遍历对象的 key。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values()"></a>Object.values()</h3><p><code>Object.values()</code> 是 <code>ES 6</code> 时引入的，返回一个数组，是每个键对应的值。返回值的顺序可以参照，对象的可枚举性中顺序。</p>
<p>当然许多特性是类似的。</p>
<ul>
<li>返回的是可遍历的值，<code>enumerable</code> 为 <code>true</code></li>
<li>如果转化的值不是对象，则会先转化为对象。<ul>
<li>字符串会被转为数组输出，</li>
<li>布尔值、数值都不会为实例添加非继承的属性，返回空数组</li>
<li><code>Symbol</code> 作为 <code>key</code> 会被忽略</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objVal = &#123; <span class="number">1</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">7</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(objVal));</span><br><span class="line"><span class="comment">// [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;]</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>()]: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(obj));</span><br><span class="line"><span class="comment">// [2, 3];</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(str));</span><br><span class="line"><span class="comment">// [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;];</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(<span class="literal">true</span>));</span><br><span class="line"><span class="comment">// []</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(<span class="number">11</span>));</span><br><span class="line"><span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries()"></a>Object.entries()</h3><p><code>Object.entries()</code> 方法返回一个数组，成员是参数对象自身的所有可遍历属性的键值对数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj));</span><br><span class="line"><span class="comment">// [[&quot;x&quot;, 1], [&quot;y&quot;, 2], [&quot;z&quot;, 3]]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对象的属性名是一个 <code>Symbol</code> 值，该属性会被忽略。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>()]: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj));</span><br><span class="line"><span class="comment">// [[&#x27;x&#x27;, 2]]</span></span><br></pre></td></tr></table></figure>

<h4 id="两个用途"><a href="#两个用途" class="headerlink" title="两个用途"></a>两个用途</h4><ul>
<li>遍历对象的属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`key = <span class="subst">$&#123;k&#125;</span>, val = <span class="subst">$&#123;v&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key = x, val = 1</span></span><br><span class="line"><span class="comment">// key = y, val = 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将对象转为真正的 <a href="">Map 结构</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj));</span><br><span class="line"><span class="built_in">console</span>.log(map);</span><br><span class="line"><span class="comment">// Map &#123; x: 1, y: 2 &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries()"></a>Object.fromEntries()</h2><p><code>Object.fromEntries()</code> 是 <code>Object.entries()</code> 的逆向操作，<strong>用于将一个键值对数组转为对象</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  [<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>],</span><br><span class="line">];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.fromEntries(arr));</span><br><span class="line"><span class="comment">// &#123; x: 1, y: 2, z: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><p>主要作用就是，是将键值对的数据结构还原为对象</p>
<ul>
<li>将 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/9"><code>Map</code> 结构</a>转为对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">map.set(<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.fromEntries(map));</span><br><span class="line"><span class="comment">// &#123; x: 1, y: 2, z: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<p>对象的扩展，我们就先介绍到这里，如果有问题，会对文章进行更新。</p>
<p><strong>感谢各位的观看!</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-6-%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-6-%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">ES 6 系列之数组的扩展</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:12 / 修改时间：13:00:29" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:12+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>基本使用，扩展运算符是什么，其实就是三个点( <code>...</code> )，在<a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">2. 变量的解构赋值 - 数组</a> 和 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/6">4. 函数的扩展 - rest 参数</a>中，接触过。</p>
<p>其实就是讲一个数组转为用逗号分隔的参数序列。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(...arr); <span class="comment">// 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(...str); <span class="comment">// H e l l o</span></span><br></pre></td></tr></table></figure>

<p>从上面的代码中，我们能够看出，其实扩展运算符就是拆解数组、字符串等类似结构。</p>
<p>当然，在这里需要注意的是只能拆一层的内容，<strong>如果数组中有对象，或者嵌套了一个数组是不可拆的</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(...arr); <span class="comment">// 1 2 &#123; a: 1 &#125; 4</span></span><br></pre></td></tr></table></figure>

<p>在<strong>对象中使用大多用来拷贝一个对象，并进行部分修改</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">c</span>: &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">3</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 下面的 a: 4,就是对a的值进行修改。</span></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; ...obj, <span class="attr">a</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj2);</span><br><span class="line"><span class="comment">// a: 4</span></span><br><span class="line"><span class="comment">// b: 2</span></span><br><span class="line"><span class="comment">// c: &#123; x: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="数组新增的方法"><a href="#数组新增的方法" class="headerlink" title="数组新增的方法"></a>数组新增的方法</h2><h3 id="Array-form"><a href="#Array-form" class="headerlink" title="Array.form()"></a>Array.form()</h3><p>该方法用于将<strong>类似数组的对象</strong>和<strong>可遍历的对象</strong>转为真正的数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">&#x27;x&#x27;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;y&#x27;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&#x27;z&#x27;</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.from(arrayLike);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [&#x27;x&#x27;, &#x27;y&#x27;, &#x27;z&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h3><p>该方法用于<strong>将一组值转化成数组</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h3 id="新增的实例方法"><a href="#新增的实例方法" class="headerlink" title="新增的实例方法"></a>新增的实例方法</h3><h4 id="find-和-findIndex"><a href="#find-和-findIndex" class="headerlink" title="find() 和 findIndex()"></a>find() 和 findIndex()</h4><ul>
<li><strong>find()</strong></li>
</ul>
<p><code>find()</code> 方法，简单来说就是<strong>在数组中找出想要的那个值</strong>。</p>
<p>可以传入三个参数，第一个参数表示，当前值；第二个参数表示，当前值所在数组中的位置；第三个参数表示，原数组。当然，<code>find()</code> 顾名思义，就是查询，会找出第一个返回 <code>true</code> 的成员。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">const</span> value = arr.find(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> val &gt; <span class="number">7</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(value); <span class="comment">// 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 来看看有两个相同值时，返回的是哪个值？</span></span><br><span class="line"><span class="keyword">const</span> value2 = arr.find(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> val &gt; <span class="number">6</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(value2); <span class="comment">// 7</span></span><br></pre></td></tr></table></figure>

<p><code>find()</code> 方法中，可以传递第二个参数，用来绑定 <code>this</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = &#123;</span><br><span class="line">  <span class="attr">first</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">second</span>: <span class="number">20</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> ages = [<span class="number">11</span>, <span class="number">20</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">const</span> value = ages.find(<span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> val &gt; <span class="built_in">this</span>.first;</span><br><span class="line">&#125;, age);</span><br><span class="line"><span class="built_in">console</span>.log(value); <span class="comment">// 11</span></span><br></pre></td></tr></table></figure>

<p>在上面通过参数二传入一个对象，来绑定 <code>this</code>。当然这里可以会有疑问，为什么不用箭头函数了？ 这里具体可以去看看 <a href="">普通函数与箭头函数的 <code>this</code> 指向问题</a>。</p>
<ul>
<li><strong>findIndex()</strong></li>
</ul>
<p><code>findIndex()</code> 方法与 <code>find()</code> 方法非常接近，**返回第一个符合条件的成员的位置(也就是数组的下标)，如果找不到，则返回 <code>-1</code>**。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">const</span> index = arr.findIndex(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">7</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(index); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 来看看两个符合条件值时，返回是第几个的位置？</span></span><br><span class="line"><span class="keyword">const</span> index2 = arr.findIndex(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">6</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(index2); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p><code>findIndex()</code> 方法是可以通过 <code>Objecy.is(NaN)</code> 来识别出 <code>NaN</code> 的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log([<span class="literal">NaN</span>].findIndex(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, val)));</span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h4 id="fill"><a href="#fill" class="headerlink" title="fill()"></a>fill()</h4><p><code>fill</code> 方法使用给定值，<strong>填充一个数组</strong>。</p>
<p>参数可传一共三个</p>
<ul>
<li>第一个参数 - 被填充的值。</li>
<li>第二个、第三个参数 - 用于填充的起始位置和结束位置</li>
</ul>
<p>后两个参数可以不传，视为所有元素都是被填充元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.fill(<span class="number">3</span>)); <span class="comment">// [3, 3, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.fill(<span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// [1, 5, 3]</span></span><br></pre></td></tr></table></figure>

<h4 id="keys-、values-和-entries"><a href="#keys-、values-和-entries" class="headerlink" title="keys()、values() 和 entries()"></a>keys()、values() 和 entries()</h4><p>ES6 提供的新的方法 <strong>用来遍历数组</strong> 。返回的都是一个<strong>遍历器对象</strong>，可以用 <code>for...of</code> 循环进行遍历。</p>
<ul>
<li><strong>keys()</strong></li>
</ul>
<p><code>keys()</code> 实例方法，就是为了<strong>遍历数组的 key</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> arr.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>values()</strong></li>
</ul>
<p><code>values()</code> 实例方法，是为了<strong>遍历数组的值</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> arr.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 相当于普通的循环遍历</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>entries()</strong></li>
</ul>
<p><code>entries()</code> 实例方法，<strong>是对键值对的遍历</strong>。 在这里还用到了<a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">数组的解构赋值</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> arr.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// 1 &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// 2 &#x27;z&#x27;</span></span><br></pre></td></tr></table></figure>

<p>上面代码中的 <code>[key, value]</code>，其实就是遍历 <code>arr.entries()</code> ，并对其中一个值进行<a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">解构赋值</a>。</p>
<p>可以来看看不使用 <code>for...of</code> 的写法，需要自己<strong>手动调用遍历器对象的 <code>next</code> 方法，然后<code>.value</code> 去取到相应值</strong>，为了方便这里就写在一起了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="comment">// keys()</span></span><br><span class="line"><span class="keyword">let</span> keys = arr.keys();</span><br><span class="line"><span class="built_in">console</span>.log(keys.next().value); <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(keys.next().value); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(keys.next().value); <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// values()</span></span><br><span class="line"><span class="keyword">let</span> values = arr.values();</span><br><span class="line"><span class="built_in">console</span>.log(values.next().value); <span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(values.next().value); <span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(values.next().value); <span class="comment">// &#x27;z&#x27;</span></span><br><span class="line"><span class="comment">// entries()</span></span><br><span class="line"><span class="keyword">let</span> entries = arr.entries();</span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [0, &#x27;x&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [1, &#x27;y&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [2, &#x27;z&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h4><p><code>includes()</code> 实例方法，就是用来做一个判断，表示<strong>某个数组是否包含给定过的值</strong>，与字符串的 <code>includes</code> 方法类似。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="literal">undefined</span>, <span class="literal">NaN</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="string">&#x27;1&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="literal">undefined</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="literal">NaN</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><code>includes()</code> 方法的第二个参数表示<strong>搜索的起始位置</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="literal">undefined</span>, <span class="literal">NaN</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>上面的例子表示，检索数组从下标 <code>1</code> 开始检索，所以第一个参数 <code>&#39;x&#39;</code>，就检索不到啦。</p>
<h4 id="flat-flatMap"><a href="#flat-flatMap" class="headerlink" title="flat(),flatMap()"></a>flat(),flatMap()</h4><ul>
<li><strong>flat()</strong></li>
</ul>
<p><code>flat()</code> 就是简单来说就是 <strong>数组的扁平化</strong>，如果数组内嵌套数组，那就可以将其转为单层数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>]];</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat()); <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<p>当然，默认情况下，只会偏平一层，如果传入参数就可以偏平自己需要的层数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, [<span class="number">5</span>]]]];</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat()); <span class="comment">// [1, 2, 3, [4, [5]]]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.flat(<span class="number">2</span>)); <span class="comment">// [1, 2, 3, 4, [5]]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.flat(<span class="number">3</span>)); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>如果你需要无论多少层都将其转化为一层，使用<code>正无穷(Infinity)</code>作为参数即可。</p>
<p>如果数组有<strong>空位</strong>，<code>flat()</code> 函数则会将空位跳过</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, [<span class="number">5</span>, [<span class="number">6</span>]]]]]];</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat(<span class="literal">Infinity</span>)); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, , <span class="number">3</span>, , <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(array.flat()); <span class="comment">// [1, 3, 5]</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>flatMap()</strong></li>
</ul>
<p><code>flatMap()</code> 实例方法，可以理解为，对数组进行 <code>map</code> 操作，然后对返回值组成的数组执行 <code>flat()</code> 方法。该实例方法，返回一个新的数组，不会改变原数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>]];</span><br><span class="line"><span class="keyword">let</span> array = arr.flatMap(<span class="function">(<span class="params">item</span>) =&gt;</span> item * <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>该方法只能展开一层，无法多层展开，有兴趣的，可以去验证一下。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-5-%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-5-%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">ES 6 系列之函数的扩展</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:57:59 / 修改时间：13:00:49" itemprop="dateCreated datePublished" datetime="2022-01-18T12:57:59+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="函数参数默认值"><a href="#函数参数默认值" class="headerlink" title="函数参数默认值"></a>函数参数默认值</h2><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p>我们来介绍一下函数的默认值，在 ES6 之前，不能直接为函数的参数指定默认值，只能采用变通的方式。</p>
<p>我们先来看看 ES6 之前怎么给函数参数添加默认值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  y = y || <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>)); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>我们做的是检查 <code>y</code> 的值有没有传入，如果没有则会默认被赋值为 <code>1</code>。这种方式是有缺点的，如果传入的值为<strong>布尔值 <code>false</code><strong>，那么传入的值会变得无效。</strong>空字符串</strong>也是会有布尔值 <code>false</code> 一样的结果。</p>
<p>那么现在我们来看看 ES6 允许设置默认值的写法吧</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x = <span class="number">1</span>, y = <span class="number">2</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add()); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">3</span>)); <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>从上面的代码就可以看到，一眼就可以<strong>判断出参数是否可省略，且写法比 <code>ES5</code> 简洁许多</strong></p>
<blockquote>
<p>注意：</p>
<ul>
<li>函数的参数变量是默认声明的，所以不能使用 let 或者 const 再次声明。</li>
<li>参数默认值的位置，必须是在函数的尾部，如果不是在尾部，否则是没法省略的。</li>
</ul>
</blockquote>
<h3 id="解构赋值与默认值结合使用"><a href="#解构赋值与默认值结合使用" class="headerlink" title="解构赋值与默认值结合使用"></a><strong>解构赋值与默认值结合使用</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[x, y] = [<span class="number">1</span>, <span class="number">2</span>]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>来我们还是先用 <code>add</code> 函数来举例，上面就是用的数组的解构赋值，可以个传入的数组进行解构赋值，默认解构赋值。</p>
<h3 id="函数的-length"><a href="#函数的-length" class="headerlink" title="函数的 length"></a>函数的 length</h3><p>很奇怪吧，函数居然能有 <code>length</code>，来我们在这里简单提一下函数的 <code>length</code> 是什么。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;&#125;.length); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="function"><span class="keyword">function</span> (<span class="params">x = <span class="number">1</span></span>) </span>&#123;&#125;.length); <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="function"><span class="keyword">function</span> (<span class="params">x, y, z = <span class="number">2</span></span>) </span>&#123;&#125;.length); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>没错，就是这样。它的 <code>length</code> 就是函数必须传入的参数，也就是函数的所有参数减去制定了默认值的参数个数。 如果设置了默认值的参数不是尾参数，那么 <code>length</code> 属性也不再计入后面的参数了。</p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><hr>
<h2 id="rest-参数"><a href="#rest-参数" class="headerlink" title="rest 参数"></a>rest 参数</h2><p>ES6 中引入来 <code>rest</code> 参数（形式为 <code>...变量名</code> ），用于获取函数的多余参数，替代 <code>arguments</code> 对象。</p>
<p>我们还是那 <code>add</code> 函数来举例吧。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">...values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> values) &#123;</span><br><span class="line">    sum += num;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>

<p>这里就可以看出来，<code>rest</code> 参数是做什么用的，使用它之后，参数可以无限传入，不限制定量。</p>
<p>函数的 <code>length</code> 不包括 <code>rest</code> 参数。</p>
<hr>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>我们来看看 ES6 中增加的箭头函数( <code>=&gt;</code> )，来我们还是用 <code>add</code> 函数来举例子，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>来看看更简单的写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n * n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">const</span> multiply = <span class="function">(<span class="params">n</span>) =&gt;</span> n * n;</span><br></pre></td></tr></table></figure>

<p>有时候 <code>return</code> 可以省略。</p>
<p>当然，箭头函数可以<strong>嵌套</strong>使用，会大大增加代码量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">z</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> x + y + z;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面是普通的写法，然后我们来看一下箭头函数的写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x</span>) =&gt;</span> <span class="function">(<span class="params">y</span>) =&gt;</span> <span class="function">(<span class="params">z</span>) =&gt;</span> x + y + z;</span><br></pre></td></tr></table></figure>

<p>对比一下，应该就知道啦，两种的写法简便程度差别真的很大。</p>
<h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h3><p>在这里，稍微提一下箭头函数的相关注意点：</p>
<ul>
<li>箭头函数没有自己的 <code>this</code> 对象</li>
<li>不可以当作构造函数，即不可使用 <code>new</code> 命令</li>
<li>不可以使用 <code>arguments</code> 对象，不存在该对象，但是可以使用 <code>rest</code> 参数代替</li>
<li>不可以使用 <code>yield</code> 命令，因此箭头函数不能使用 <code>Generator</code> 函数</li>
</ul>
<p>在这里不特点讲述，如果想要具体了解，可以看一下我的另一篇文章<a href="">Javasctip - this 指向</a>，文章后续补齐。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">ES 6 系列之字符串的扩展</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:57:41 / 修改时间：13:00:45" itemprop="dateCreated datePublished" datetime="2022-01-18T12:57:41+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="字符串的遍历"><a href="#字符串的遍历" class="headerlink" title="字符串的遍历"></a>字符串的遍历</h2><p>ES6 中添加了字符串的遍历器接口，字符串就可以使用 <code>for...of</code> 来遍历了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> c <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(c); <span class="comment">// H e l l o</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JSON-stringify-和-JSON-parse"><a href="#JSON-stringify-和-JSON-parse" class="headerlink" title="JSON.stringify() 和 JSON.parse()"></a><code>JSON.stringify()</code> 和 <code>JSON.parse()</code></h2><p>在有时候，我们需要将一个 <code>JSON</code> 格式的数据，转成字符串进行页面传递。<br>所以这时候采用 <code>JSON.stringify()</code> 进行序列化。然后传递，在目的页面使用 <code>JSON.parse()</code> 转为 <code>JavaScript</code> 对象。在进行大数据传递时，时常需要。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;hzzzzzzzq&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">1.8</span>,</span><br><span class="line">  <span class="attr">weight</span>: <span class="number">140</span>,</span><br><span class="line">  <span class="attr">skills</span>: [<span class="string">&#x27;JavaScript&#x27;</span>],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> s = <span class="built_in">JSON</span>.stringify(person);</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br><span class="line"><span class="comment">// &#123;&quot;name&quot;:&quot;hzzzzzzzq&quot;,&quot;age&quot;:18,&quot;height&quot;:1.8,&quot;weight&quot;:140,&quot;skills&quot;:[&quot;JavaScript&quot;]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="built_in">JSON</span>.parse(s);</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//  &quot;name&quot;: &quot;hzzzzzzzq&quot;,</span></span><br><span class="line"><span class="comment">//  &quot;age&quot;: 18,</span></span><br><span class="line"><span class="comment">//  &quot;height&quot;: 1.8,</span></span><br><span class="line"><span class="comment">//  &quot;weight&quot;: 140,</span></span><br><span class="line"><span class="comment">//  &quot;skills&quot;: [</span></span><br><span class="line"><span class="comment">//     &quot;JavaScript&quot;</span></span><br><span class="line"><span class="comment">//   ]</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="模版字符串"><a href="#模版字符串" class="headerlink" title="模版字符串"></a>模版字符串</h2><p>什么是模版字符串呢？简单来说，其实就是加强版的字符串，使用 ( <strong>`</strong> )作为标识符 。可以作为普通的字符串使用，也可以用来定义多行字符串，或者在字符串中使用变量。</p>
<p>我们来看看使用普通字符串时 是怎么进行换行，或者加入变量的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">let</span> info = <span class="string">&#x27;my name is &#x27;</span> + name + <span class="string">&#x27;\n my age is &#x27;</span> + age;</span><br><span class="line"><span class="built_in">console</span>.log(info);</span><br><span class="line"><span class="comment">// my name is hzzzzzzzq</span></span><br><span class="line"><span class="comment">// my age is 18</span></span><br></pre></td></tr></table></figure>

<p>然后我们再来看看模版字符串的写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">let</span> info = <span class="string">`my name is <span class="subst">$&#123;name&#125;</span></span></span><br><span class="line"><span class="string">my age is <span class="subst">$&#123;age&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(info);</span><br><span class="line"><span class="comment">// my name is hzzzzzzzq</span></span><br><span class="line"><span class="comment">// my age is 18</span></span><br></pre></td></tr></table></figure>

<p>换行，直接就使用回车就可以换行，你输入的样子是怎样的，打印基本上就是怎样的。</p>
<p>变量采用 <code>$&#123;&#125;</code> 来嵌入，也可以直接写入一个字符串中，少写了许多没必要的 <code>+</code> 号。</p>
<h2 id="字符串中的新增方法"><a href="#字符串中的新增方法" class="headerlink" title="字符串中的新增方法"></a>字符串中的新增方法</h2><p>在这里就列举一些常用的实例方法</p>
<h3 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h3><p><code>includes()</code> 实例方法，返回的是一个布尔值（<code>true</code>和<code>false</code>），<strong>表示是否找到了参数字符串</strong>。<br>参数二来表示开始搜索的位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;Hello hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.includes(<span class="string">&#x27;Hello&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(s.includes(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(s.includes(<span class="string">&#x27;zzzzzzz&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(s.includes(<span class="string">&#x27;H&#x27;</span>, <span class="number">2</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="startsWith-、endsWith"><a href="#startsWith-、endsWith" class="headerlink" title="startsWith()、endsWith()"></a>startsWith()、endsWith()</h3><ul>
<li><strong>startsWith()</strong><br><code>startsWith()</code> 返回也是布尔值，<strong>表示参数是否在原字符串的头部</strong>。<br>第二参数也表示开始搜索的位置。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;Hello hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.startsWith(<span class="string">&#x27;Hello&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(s.startsWith(<span class="string">&#x27;e&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="comment">// 表示从 1 开始</span></span><br><span class="line"><span class="built_in">console</span>.log(s.startsWith(<span class="string">&#x27;Hello&#x27;</span>, <span class="number">1</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>endsWith()</strong><br><code>endsWith()</code> 返回也是布尔值，<strong>表示参数是否在原字符串的尾部</strong>。<br>注意：这里的第二参数表示的是到 n 为止，不像 <code>startsWith()</code> 是从 <code>n</code> 开始到字符串结尾。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;Hello hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.endsWith(<span class="string">&#x27;q&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(s.endsWith(<span class="string">&#x27;zzzzq&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 表示看前 5 个字符</span></span><br><span class="line"><span class="built_in">console</span>.log(s.endsWith(<span class="string">&#x27;o&#x27;</span>, <span class="number">5</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 表示看前 4 个字符</span></span><br><span class="line"><span class="built_in">console</span>.log(s.endsWith(<span class="string">&#x27;o&#x27;</span>, <span class="number">4</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat()"></a>repeat()</h3><p><code>repeat()</code> 返回一个新字符串，表示将原字符串重复 <code>n</code> 次。</p>
<ul>
<li>如果传入的是小数，则会往下取整。</li>
<li>传入参数不能是 <code>Infinity</code> 和 小于 <code>-1</code> 的值</li>
<li><code>0</code> 到 <code>-1</code> 之间的小数，则按照等同于 <code>0</code> 来计算。</li>
<li><code>NaN</code> 会被转为 <code>0</code></li>
<li>参数是字符串则先转为数字，如果不能转为数字，则为 <code>0</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.repeat(<span class="number">4</span>)); <span class="comment">// &#x27;aaaa&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(s.repeat(<span class="number">3.6</span>)); <span class="comment">// &#x27;aaa&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(s.repeat(-<span class="number">0.6</span>)); <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(s.repeat(<span class="string">&#x27;aaa&#x27;</span>)); <span class="comment">// &#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="padStart、padEnd"><a href="#padStart、padEnd" class="headerlink" title="padStart、padEnd()"></a>padStart、padEnd()</h3><p>两个实例方法，就是用于字符串的补齐。<br><strong>第一参数表示想要字符串的长度，第二参数表示字符串没达到第一参数时使用参数二字符串进行补齐。</strong></p>
<ul>
<li><strong>padStart()</strong><br>很明显，<code>Start</code>，就是在字符串的头部补全。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;aaa&#x27;</span>;</span><br><span class="line"><span class="comment">// 如果原长度大于或等于想要补齐长度，则不生效。</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padStart(<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)); <span class="comment">// aaa</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padStart(<span class="number">10</span>, <span class="string">&#x27;b&#x27;</span>)); <span class="comment">// bbbbbbbaaa</span></span><br><span class="line"><span class="comment">// 如果补齐字符串长度大于剩余格数，则会省略后面字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padStart(<span class="number">4</span>, <span class="string">&#x27;bcde&#x27;</span>)); <span class="comment">// baaa</span></span><br><span class="line"><span class="comment">// 如果，第二参数无内容，则使用空格补齐</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padStart(<span class="number">4</span>)); <span class="comment">// &#x27; aaa&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>padEnd()</strong><br><code>End</code> 就是在字符串的尾部补全。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;aaa&#x27;</span>;</span><br><span class="line"><span class="comment">// 如果原长度大于或等于想要补齐长度，则不生效。</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padEnd(<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)); <span class="comment">// aaa</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padEnd(<span class="number">10</span>, <span class="string">&#x27;b&#x27;</span>)); <span class="comment">// aaabbbbbbb</span></span><br><span class="line"><span class="comment">// 如果补齐字符串长度大于剩余格数，则会省略后面字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padEnd(<span class="number">4</span>, <span class="string">&#x27;bcde&#x27;</span>)); <span class="comment">// aaab</span></span><br><span class="line"><span class="comment">// 如果，第二参数无内容，则使用空格补齐</span></span><br><span class="line"><span class="built_in">console</span>.log(s.padEnd(<span class="number">4</span>)); <span class="comment">// &#x27;aaa &#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="trimStart-、trimEnd"><a href="#trimStart-、trimEnd" class="headerlink" title="trimStart()、trimEnd()"></a>trimStart()、trimEnd()</h3><p>这两个实例都是用来<strong>去除字符串空格用的</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;   x   &#x27;</span>;</span><br><span class="line"><span class="comment">// start 去除前面空格</span></span><br><span class="line"><span class="built_in">console</span>.log(s.trimStart()); <span class="comment">// &#x27;x   &#x27;</span></span><br><span class="line"><span class="comment">// end 去除后面空格</span></span><br><span class="line"><span class="built_in">console</span>.log(s.trimEnd()); <span class="comment">// &#x27;   x&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="replaceAll"><a href="#replaceAll" class="headerlink" title="replaceAll()"></a>replaceAll()</h3><p><code>replaceAll()</code> 实例方法是用来替换字符串中的字符用的。</p>
<p>在提到这个之前，我们先看看 <code>replace()</code> ，<strong>参数一是被替换的值，参数二是替换值</strong>，简单来讲就是，<strong>参数二用来替换参数一</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;abcabc&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.replace(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;x&#x27;</span>)); <span class="comment">// xbcabc</span></span><br></pre></td></tr></table></figure>

<p><code>replace()</code> 只能替代一个，是第一个遇到的。</p>
<p>那我们来看看 <code>replaceAll()</code>，是全部替换。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;abcabc&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.replaceAll(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;x&#x27;</span>)); <span class="comment">// xbcxbc</span></span><br></pre></td></tr></table></figure>

<p>这里是简单的用法，当然在 <code>replaceAll()</code> 第二参数还可以传入一个函数，具体可以看看 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll">MDN 的 replaceAll()</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-3-%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatoar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-3-%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/" class="post-title-link" itemprop="url">ES 6 系列之变量的解构赋值</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:55:45 / 修改时间：13:00:42" itemprop="dateCreated datePublished" datetime="2022-01-18T12:55:45+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>解构赋值：ES6 允许按照一定模式，从数组、字符串和对象中提取值，对变量进行赋值</p>
<p>我们来看一下以前赋值的方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>那么现在我们来初步了解一下解构赋值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>];</span><br></pre></td></tr></table></figure>

<p>上面两段代码的赋值结果是相同的。</p>
<hr>
<h2 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>我们来看看数组的解构赋值，在上面中，我们使用了数组的解构赋值，来举例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c, d] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br></pre></td></tr></table></figure>

<p>这样操作之后，就可以从数组中提取到相应的值，<strong>按照对应位置，对变量赋值</strong>。</p>
<p>本质上，也就是模式的匹配，只要等号两边的模式相同，左边的变量就会被赋予对应的值。</p>
<p>我们来多举例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子1</span></span><br><span class="line"><span class="keyword">let</span> [a, [b], [c]] = [<span class="number">1</span>, [<span class="number">2</span>], [<span class="number">3</span>]];</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子1</code> 中可以看出，这是一种嵌套数组取值方式，可以看出，数组的解构赋值，可以进行嵌套取值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子2</span></span><br><span class="line"><span class="keyword">let</span> [, a] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子2</code> 来看，就证明了数组赋值解构说的这句话，<strong>按照对应的值，对变量进行赋值</strong>，而不是每次都从第一个开始取。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子3</span></span><br><span class="line"><span class="keyword">let</span> [a, ...arr] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [2, 3, 4];</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子3</code> 来看，我们也可以用 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/7">扩展运算符</a> 这里需要一个扩展运算符的项目，来同时将后面的值放到一个数组中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子4</span></span><br><span class="line"><span class="keyword">let</span> [a, b, ...arr] = [<span class="number">1</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子4</code> 来看，我们能发现，如果在右侧找不到值时，就是解构不成功，这时候如果是单变量，则会等于 <a href="%E6%95%B0%E6%8D%AE%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><code>undefined</code></a>，如果是使用了 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/7">扩展运算符</a> 的变量，则是空数组。</p>
<h3 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h3><p>接下来，我们来看一下解构赋值中指定默认值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子5</span></span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">10</span>] = [];</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>在上面的 <code>例子5</code> 中，可以看到，<code>a</code> 对应的右侧是解构失败的，值应该为 <code>undefined</code>，但是输出是 <code>10</code>，这就是因为<strong>解构赋值中允许指定默认值</strong></p>
<p>但是默认值是有生效条件的：<strong>只有当一个数组成员严格等于 <code>undefined</code> 时，默认值才会生效</strong>。</p>
<blockquote>
<p>ES6 中的严格相等运算符( <code>===</code> )，可以判断一个位置是否有值。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子6</span></span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>] = [<span class="number">10</span>, <span class="literal">null</span>, <span class="literal">undefined</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// null</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>在 <code>例子6</code> 中，就可以看出只有当右侧的值严格相等于 <code>undefined</code> 时，默认值才会生效。</p>
<hr>
<h2 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h2><p>解构赋值并不只是在数组中，在对象中也可以。</p>
<h3 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子7</span></span><br><span class="line"><span class="keyword">let</span> &#123; a, b &#125; = &#123; <span class="attr">a</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// &#x27;aaa&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// &#x27;bbb&#x27;</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子7</code> 中，我们可以看出对象的解构赋值与数组的解构赋值的一个重要的不同点。数组元素是按照对应的下标次序来排列的，但是在对象中，变量必须与属性同名，才可以取到正确的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子8</span></span><br><span class="line"><span class="keyword">let</span> &#123; b, c &#125; = &#123; <span class="attr">a</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// &#x27;bbb&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子8</code> 中，我们可以看到，对象的解构赋值，变量必须与属性同名，且并不是按照次序来对应的。同数组，解构失败时，变量的值等于 <code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子9</span></span><br><span class="line"><span class="keyword">let</span> &#123;</span><br><span class="line">  <span class="attr">a</span>: &#123; b &#125;,</span><br><span class="line">&#125; = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">20</span> &#125; &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子10</span></span><br><span class="line"><span class="keyword">let</span> &#123; a &#125; = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">20</span> &#125; &#125;;</span><br></pre></td></tr></table></figure>

<p>从 <code>例子9</code> 中，我们可以看到，对象的解构赋值，也是同数组一样，可以进行嵌套取值。</p>
<blockquote>
<p>注意：在这里 <code>例子9</code> 中左侧的 <code>a</code> 是模式，不是变量，因此不会被赋值，如果想要 <code>a</code> 也被赋值，可以使用 <code>例子10</code> 的写法</p>
</blockquote>
<h3 id="默认值-1"><a href="#默认值-1" class="headerlink" title="默认值"></a>默认值</h3><p>我们在数组解构赋值中，可以使用默认值，那么在对象中，是不是也有呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子11</span></span><br><span class="line"><span class="keyword">let</span> &#123; a = <span class="number">1</span> &#125; = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子12</span></span><br><span class="line"><span class="keyword">let</span> &#123; a, b = <span class="number">2</span> &#125; = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子13</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">a</span>: b = <span class="number">1</span> &#125; = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子11</code>、<code>例子12</code>、<code>例子13</code>，可以看出，其实对象的默认值与数组的默认值是类似的。</p>
<hr>
<h2 id="字符串的解构赋值"><a href="#字符串的解构赋值" class="headerlink" title="字符串的解构赋值"></a>字符串的解构赋值</h2><p>字符串也是可以进行解构赋值的，其实就是相当于将字符串转化成一个类似数组的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子14</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c, d, e] = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// &#x27;h&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// &#x27;e&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// &#x27;l&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(d); <span class="comment">// &#x27;l&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(e); <span class="comment">// &#x27;o&#x27;</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子14</code> 来看，就可以明白了，数组的解构赋值相当于被转化成一个类数组的对象进行解构赋值。</p>
<hr>
<h2 id="函数参数的解构赋值"><a href="#函数参数的解构赋值" class="headerlink" title="函数参数的解构赋值"></a>函数参数的解构赋值</h2><p>函数的参数也是可以使用解构赋值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子15</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[a, b]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add([<span class="number">1</span>, <span class="number">2</span>])); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>从 <code>例子15</code> 可以看出，函数的参数是可以进行解构赋值的，既然<strong>数组</strong>可以，那么<strong>对象</strong>也可以，<strong>字符串</strong>也是。</p>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hzzzzzzzq</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
