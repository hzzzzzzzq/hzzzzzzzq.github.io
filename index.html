<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="工作是修心的道场">
<meta property="og:type" content="website">
<meta property="og:title" content="Welcome">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Welcome">
<meta property="og:description" content="工作是修心的道场">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hzzzzzzzq">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Welcome</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XYLG2D6KK6"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-XYLG2D6KK6","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Welcome</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">欢迎来到我的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="hzzzzzzzq"
      src="/images/my_avatar.png">
  <p class="site-author-name" itemprop="name">hzzzzzzzq</p>
  <div class="site-description" itemprop="description">工作是修心的道场</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-Git-2-git-%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-Git-2-git-%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">Git 系列之Git 实践</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-18 16:35:40" itemprop="dateCreated datePublished" datetime="2022-01-18T16:35:40+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-19 10:48:57" itemprop="dateModified" datetime="2022-01-19T10:48:57+08:00">2022-01-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天来一篇 <code>git</code> 的在实际开发过程中的操作。</p>
<h2 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h2><ul>
<li>先到自己想要放项目的目录之下</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/66205484/145941855-ee376157-ea50-4815-b072-f6e17388bf3c.png" alt="image"></p>
<ul>
<li>然后拷贝项目，后面的 <code>url</code> 放置自己的项目地址<br>当然，可能会进行密码输入之类的问题 比如 <strong>GitHub 不再支持密码验证解决方案：SSH 免密与 Token 登录配置</strong>。<br>这时候的链接，可能是需要 <code>SSH</code> 命令的 <code>git@github.com:hzzzzzzzq/git-application-docs.git</code>。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/hzzzzzzzq/git-application-docs.git</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:hzzzzzzzq/git-application-docs.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝之后我们 cd 到目录文件</span></span><br><span class="line"><span class="built_in">cd</span> git-application-docs</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145945033-c6a0cd8d-fd48-48df-8c70-493dafe38e90.png" alt="image"></p>
<p>现在，就是我们 <code>clone</code> 下来的项目。</p>
<h2 id="提交和推送"><a href="#提交和推送" class="headerlink" title="提交和推送"></a>提交和推送</h2><ul>
<li><p>先添加想要加入的文件夹<br>我们这里加入 <code>git</code> 文件夹，以及 <code>branchTry.md</code> 用于分支合并，和 <code>gitTry.md</code> 用于 <code>git</code> 提交等。<br><img src="https://user-images.githubusercontent.com/66205484/145945306-950914ca-082a-4277-aa98-59ed75dfd584.png" alt="image"></p>
</li>
<li><p>将添加的文件加入<strong>暂存区</strong></p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单个文件添加</span></span><br><span class="line">git add git/gitTry.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 全部一起添加</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果该文件被忽略，则需要添加 -f 强制添加</span></span><br><span class="line">git add -f git/branchTry.md</span><br></pre></td></tr></table></figure>

<ul>
<li>然后使用 <code>git commit</code> 提交<br><code>git commit</code> 是将文件提交到本地仓库，用来记录本次修改的内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;feat: 添加文件&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145946832-6365b89f-1bbc-49db-bdee-b629e38da6a5.png" alt="image"></p>
<p>其中包含了修改的文件内容。</p>
<p><strong>补充：提交信息的规范</strong></p>
<blockquote>
<p>feat: 新功能<br>fix: 修补 bug<br>docs: 文档修改<br>style: 格式修改<br>refactor: 重构<br>merge: 合并</p>
</blockquote>
<ul>
<li>提交本地仓库代码到远端仓库</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145946928-94db41fa-ce35-4c8d-b89f-a90e624bfb7e.png" alt="image"></p>
<p><code>git push</code> 提交远端仓库的结果。</p>
<h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><ul>
<li>创建一个新分支，并切换入该分支<br><code>feat-branch</code> 是分支名，这里基本是按照功能来命名。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b feat-branch</span><br></pre></td></tr></table></figure>

<ul>
<li>切换分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main 就是你要切换的分支名</span></span><br><span class="line"><span class="comment"># 切回主分支</span></span><br><span class="line">git checkout main</span><br></pre></td></tr></table></figure>

<ul>
<li>删除分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># feat-branch 就是想要删除的分支名称</span></span><br><span class="line"><span class="comment"># 因为该分支还需要使用，就不做操作了。</span></span><br><span class="line">git branch -d feat-branch</span><br></pre></td></tr></table></figure>

<ul>
<li>将分支提交到远端分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push git@github.com:hzzzzzzzq/git-application-docs.git feat-branch</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145948538-7a1b1cfa-68a2-4331-93c1-b7ccd4233e4b.png" alt="image"></p>
<p>这时候，在远端仓库中，就可以看到该分支了。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/145948592-28bfcf8d-bbc9-4bd4-abea-3677f5166223.png" alt="image"></p>
<h2 id="拉取"><a href="#拉取" class="headerlink" title="拉取"></a>拉取</h2><p>一个项目经常是多个人一起进行开发的，当别人提交代码时，我们就需要拉取他人的代码了。这时候 <code>git pull</code> 的作用就来了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure>

<p>为了演示 <code>git pull</code>，我在这边新建一个 <code>git</code> 本地仓库，用来演示共同开发时的拉取以及冲突。</p>
<p><code>clone</code> 一个新项目，我们然后对文件进行部分修改，然后进行提交。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/145949740-f16e3a5f-37a0-4a9e-84d0-d949b81250a4.png" alt="image"></p>
<p><img src="https://user-images.githubusercontent.com/66205484/145949825-3bdd4f02-b9d4-4fff-b7e1-5acef06fcb0b.png" alt="image"></p>
<p>接下来，我们重新切回到我们之前的文件，然后进行 <code>git pull</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换原项目</span></span><br><span class="line"><span class="built_in">cd</span> ../git-application-docs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切到 main 分支</span></span><br><span class="line">git checkout main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取远端代码</span></span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145950387-c9287701-4fa0-45fe-b4fe-40fbd0536277.png" alt="image"></p>
<h2 id="合并与冲突"><a href="#合并与冲突" class="headerlink" title="合并与冲突"></a>合并与冲突</h2><p>在 <code>main</code> 分支下，修改标题内容。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/145951381-1dcf6294-2fed-4604-b1b7-15ff41c8e38d.png" alt="image"></p>
<p>然后提交。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/145951973-5b9d95a9-e398-4cf5-a918-cb87aacf7106.png" alt="image"></p>
<p>切换到 <code>feat-branch</code>，并修改同文件的标题，并提交。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切分支</span></span><br><span class="line">git checkout feat-branch</span><br><span class="line"><span class="comment"># 添加到暂存区</span></span><br><span class="line">git add .</span><br><span class="line"><span class="comment"># 提交</span></span><br><span class="line">git commit -m <span class="string">&quot;feat: change branch title&quot;</span></span><br><span class="line"><span class="comment"># 推送到远端</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145952854-b3002d2b-5002-403e-9911-351e77114f98.png" alt="image"></p>
<ul>
<li>合并</li>
</ul>
<p>我们切回 <code>main</code> 分支，然后将 <code>feat-branch</code> 合并到 <code>main</code> 分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切分支</span></span><br><span class="line">git checkout main</span><br><span class="line"><span class="comment"># 合并</span></span><br><span class="line">git merge feat-branch</span><br><span class="line"><span class="comment"># 没有冲突的情况，直接推送即可</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<p>如果合并没有问题，就可以直接进行 <code>push</code> 操作。<br>但是，由于我们在两个分支，同时对同一个文件的同一个地方进行了修改，于是，就产生了以下问题，<code>merge</code> 失败，有冲突。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/145953252-68c50a45-491c-45e4-8fe0-9547b848bf2e.png" alt="image"></p>
<ul>
<li>冲突</li>
</ul>
<p>我们需要打开文件夹，我们发现一些奇奇怪怪的符号，这些就是冲突的标识，我们需要对冲突进行处理。<br>将文件进行修改，调整到你希望的样子。并对全局进行检查是否，还有其他冲突文件。</p>
<p>我们看到有 <code>&lt;&lt;&lt;&lt;&lt;&lt;</code> 以及 <code>======</code> 因为在 <code>.md</code> 文件中，我打开了源形式，否则可能看不到 <code>=====</code> 或者 <code>&lt;</code> 被转化。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/145954659-f1b01667-b998-4dfb-876a-bc0df63ce0f7.png" alt="image"></p>
<p>现在我演示一下，我想保留 <code>feat-branch</code> 的内容，则删除 <code>main</code> 分支的内容。<br>将 <code>main</code> 分支内容删除之后的样子。<br><img src="https://user-images.githubusercontent.com/66205484/145954865-71a2a7a6-a0d4-4ddf-b1aa-1bc3fa2e5225.png" alt="image"></p>
<ul>
<li>提交推送</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加冲突文件到暂存区</span></span><br><span class="line">git add .</span><br><span class="line"><span class="comment"># 提交到本地</span></span><br><span class="line">git commit -m <span class="string">&quot;merge: 合并冲突&quot;</span></span><br><span class="line"><span class="comment"># 推送到远端</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145955245-05b5c18b-88b0-41c1-a84a-e44d255ea3c0.png" alt="image"></p>
<p>这时，我们在远端仓库 <code>main</code> 分支下，看到的就是我们 <code>feat-branch</code> 分支中的内容了。</p>
<h2 id="提交记录"><a href="#提交记录" class="headerlink" title="提交记录"></a>提交记录</h2><ul>
<li>git log 查看提交记录</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/66205484/145955543-29fc882d-7a25-418c-9e9e-35bd77ccd8c4.png" alt="image"></p>
<ul>
<li>只看某个人的提交记录<br>这里结果是一样的，因为都是我自己完成的。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --author=hzzzzzzzq</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-Git-3-%E6%A0%BC%E5%BC%8F%E5%8C%96commit%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-Git-3-%E6%A0%BC%E5%BC%8F%E5%8C%96commit%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Git 系列之commit 格式化 husky（V7.0.4）让我们的 commit 更规范</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 16:36:00 / 修改时间：16:37:50" itemprop="dateCreated datePublished" datetime="2022-01-18T16:36:00+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这里我们来说一下为什么我们做一个 <code>git commit</code> 的格式化。<br>我们来看看 <code>commit log</code> 做格式化之前的样子。<br><img src="https://user-images.githubusercontent.com/66205484/144975728-345548af-e8b2-4b99-aa54-27f41958ed5e.png" alt="1C3B682E-04B3-49C6-8136-0F8288F552D1"></p>
<p>我们再来看看 <code>commit log</code> 格式化之后的样子。<br><img src="https://user-images.githubusercontent.com/66205484/144977548-af392772-7f52-4ec4-8f45-1f9c13300417.png" alt="image"></p>
<p>对比格式化前和格式化后的感觉， 是不是很清晰，也可以让别人看得懂你在做什么，在多人协作开发时，是特别重要的。</p>
<p>在开始文章之前，我来说一下我使用的 <code>node</code> 和 <code>npm</code> 版本。</p>
<blockquote>
<p>12.0.1 - macOS Monterey</p>
<p>v16.4.2 - node</p>
<p>7.24.0 - npm</p>
</blockquote>
<h2 id="husky（v7-0-4"><a href="#husky（v7-0-4" class="headerlink" title="husky（v7.0.4"></a>husky（v7.0.4</h2><p><code>husky</code> 是一个可以让配置 <code>git</code> 钩子变得更加简单的工具。</p>
<ul>
<li><strong>首先我们先进行安装 <code>husky</code>。</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yarn add husky -D</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">npm install husky --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>安装之后我们需要启动。</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">npm set-script prepare <span class="string">&quot;husky install&quot;</span></span><br></pre></td></tr></table></figure>

<p>这时会在 <code>package.json</code> 文件中看到下面的代码，说明执行成功。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;prepare&quot;</span>: <span class="string">&quot;husky install&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然这里可能有人可能会执行下面的命令，并且报错 <code>set-script</code> 找不到，改用 <code>npm</code> 就可以了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn set-script prepare <span class="string">&quot;husky install&quot;</span></span><br><span class="line"><span class="comment"># error Command &quot;set-script&quot; not found</span></span><br></pre></td></tr></table></figure>

<p>或者可以直接跳过启动，手动去修改 <code>package.json</code> 文件，在 scripts 中添加 <code>&quot;prepare&quot;: &quot;husky install&quot;</code> 语句，然后执行 <code>husky install</code> 命令。</p>
<p>执行之后会增加一个 <code>.husky</code> 的文件夹。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/144980206-a484f643-9116-4c46-92c7-d11ce7d07cd1.png" alt="image"></p>
<ul>
<li><strong>安装其他的一些检查规范</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 lint-staged</span></span><br><span class="line">yarn add lint-staged -D</span><br><span class="line"><span class="comment"># 安装 eslint</span></span><br><span class="line">yarn add eslint prettier -D</span><br></pre></td></tr></table></figure>

<p>在 <code>package.json</code> 文件中需要添加下面的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;src/**/*.&#123;js,jsx,ts,tsx,json&#125;&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;prettier --write&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eslint&quot;</span>,</span><br><span class="line">    <span class="string">&quot;git add&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>安装 <code>commitlint</code> 相关以来</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @commitlint/cli @commitlint/config-conventional -D</span><br></pre></td></tr></table></figure>

<ul>
<li>创建 commitlint.config.js 文件，</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令创建</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;module.exports = &#123;extends: [&#x27;@commitlint/config-conventional&#x27;]&#125;&quot;</span> &gt; commitlint.config.js</span><br></pre></td></tr></table></figure>

<p>也可以手动创建，然后添加内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>], <span class="comment">// 以下时我们自定义的规则</span></span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;type-enum&#x27;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="string">&#x27;feat&#x27;</span>, <span class="comment">// 新功能（feature）</span></span><br><span class="line">        <span class="string">&#x27;fix&#x27;</span>, <span class="comment">// 修补 bug</span></span><br><span class="line">        <span class="string">&#x27;docs&#x27;</span>, <span class="comment">// 文档（documentation）</span></span><br><span class="line">        <span class="string">&#x27;style&#x27;</span>, <span class="comment">// 格式（不影响代码运行的变动）</span></span><br><span class="line">        <span class="string">&#x27;refactor&#x27;</span>, <span class="comment">// 重构（即不是新增功能，也不是修改bug的代码变动）</span></span><br><span class="line">        <span class="string">&#x27;test&#x27;</span>, <span class="comment">// 增加测试</span></span><br><span class="line">        <span class="string">&#x27;merge&#x27;</span>, <span class="comment">// 合并分支</span></span><br><span class="line">      ],</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加 <code>commit-msg</code> 和 <code>pre-commit</code> 文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加 commit-msg</span></span><br><span class="line">yarn husky add .husky/commit-msg <span class="string">&#x27;yarn commitlint --edit &quot;$1&quot;&#x27;</span></span><br><span class="line"><span class="comment"># 添加 pre-commit</span></span><br><span class="line">yarn husky add .husky/pre-commit <span class="string">&#x27;yarn lint-staged --allow-empty &quot;$1&quot;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>这之后我们可以来看看 <code>.husky</code> 文件现在的样子</p>
<p><img src="https://user-images.githubusercontent.com/66205484/144981602-8c53ab14-4c9c-4340-9a7f-b4dc4f119c2f.png" alt="image"></p>
<ul>
<li>最好就是 测试我们的 <code>git commit</code> 了</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加内容</span></span><br><span class="line">git add .</span><br><span class="line"><span class="comment"># 提交commit</span></span><br><span class="line">git commmit -m <span class="string">&quot;feat: 优化git commit&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印内容</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/66205484/144982485-d2d4ac26-70b6-412e-a58b-5b5f223dcf7a.png" alt="image"></p>
<p>到这里我们就完成啦，当然，如果你的 <code>commit log</code> 格式，不符合自己添加的 <code>rules</code> 那么就会在 <code>commit</code> 时提交失败，这时候就需要你修改 <code>commit log</code> 的格式了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-Git-1-git-%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-Git-1-git-%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Git 系列之Git 常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 16:35:19 / 修改时间：16:37:13" itemprop="dateCreated datePublished" datetime="2022-01-18T16:35:19+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="新建代码库"><a href="#新建代码库" class="headerlink" title="新建代码库"></a>新建代码库</h2><p>可以在自己目录下创建一个新的 git 仓库，也可以从远端服务器克隆一个仓库到本地。</p>
<ul>
<li>在当前目录下创建一个 git 仓库</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<ul>
<li>新建一个目录，并将其初始化为 git 仓库</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># name 表示 新建目录名</span></span><br><span class="line">git init [name]</span><br></pre></td></tr></table></figure>

<ul>
<li>从远程仓库 下载拷贝一个仓库和它的整个代码历史</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># url - 拷贝仓库的地址</span></span><br><span class="line">git <span class="built_in">clone</span> url</span><br></pre></td></tr></table></figure>

<h2 id="添加和删除文件"><a href="#添加和删除文件" class="headerlink" title="添加和删除文件"></a>添加和删除文件</h2><p>就是将你有改动的文件，添加或删除到本地的暂存区。</p>
<ul>
<li>添加文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># filename - 文件位置</span></span><br><span class="line"><span class="comment"># 添加文件</span></span><br><span class="line">git add [filename] [filename] ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加指定目录到暂存区</span></span><br><span class="line">git add [dir]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加所有文件到暂存区</span></span><br><span class="line">git add .</span><br></pre></td></tr></table></figure>

<ul>
<li>删除文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除文件</span></span><br><span class="line">git rm [filename] [filename] ...</span><br></pre></td></tr></table></figure>

<h2 id="代码提交"><a href="#代码提交" class="headerlink" title="代码提交"></a>代码提交</h2><p>提交就是将代码提交到本地仓库区，并不会直接提交到远端服务器。提交代码也是推送的前提，有提交才会有推送。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提交暂存区到仓库区</span></span><br><span class="line">git commit -m <span class="string">&quot;代码提交信息&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交暂存区的指定文件</span></span><br><span class="line">git commit [filename] [filename] ... -m <span class="string">&quot;代码提交信息&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用新的 commit 替换上一次提交</span></span><br><span class="line"><span class="comment"># 如果内容无任何变化，用来改写上一次 commit 的提交信息</span></span><br><span class="line">git commit --amend -m <span class="string">&quot;新提交信息&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="推送改动"><a href="#推送改动" class="headerlink" title="推送改动"></a>推送改动</h2><p>推送，就是用来，将你的本地代码推送到远端服务器，在远端保存。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># branch - 想推送的分支</span></span><br><span class="line">git push [origin] [branch]</span><br></pre></td></tr></table></figure>

<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>分支是用来将特性开发绝缘开来。在创建一个仓库的时候， <code>master</code> 是<strong>默认的</strong>分支，我们可以作为主分支，在其他分支上完成相对应的功能后，再将分支合并到主分支 <code>master</code> 上。可以有效的对项目进行管理，降低出错概率。</p>
<p><img src="https://user-images.githubusercontent.com/66205484/145320439-ce0b38e6-bf4e-4fa4-80d8-4bc84b176492.png" alt="image"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个叫做 ‘feat-new’ 的分支，并切换过去</span></span><br><span class="line">git checkout -b feat-new</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换回主分支</span></span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除新建分支</span></span><br><span class="line">git branch -d feat-new</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送本地创建的分支到远端仓库，让他人可见</span></span><br><span class="line">git push origin feat-new</span><br></pre></td></tr></table></figure>

<h2 id="更新与合并"><a href="#更新与合并" class="headerlink" title="更新与合并"></a>更新与合并</h2><p>更新本地仓库，以及将本地数据合并到 <code>master</code> ，获取 (<code>fetch</code>) 并合并 (<code>merge</code>) 远端的改动。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新本地代码</span></span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并其他分支到当前分支</span></span><br><span class="line">git merge [branch]</span><br></pre></td></tr></table></figure>

<p>当然，不是每一次的合并都是顺利的，可能会出现冲突，这时候，就需要手动去修改冲突文件并合并冲突。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加 冲突文件，标记为合并成功</span></span><br><span class="line">git add [filename] [filename] ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并之前，可以使用该命令预览差异</span></span><br><span class="line">git diff [source_branch] [target_branch]</span><br></pre></td></tr></table></figure>

<h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><p>在开发过程中，是需要标签的，来标记软件发布情况。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打标签</span></span><br><span class="line"><span class="comment"># tagID 是标记的提交ID，需要具有唯一性。</span></span><br><span class="line">git tag 1.0.0 [tagID]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取提交 ID，查看本地仓库的历史记录</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以添加参数来修改输出</span></span><br><span class="line"><span class="comment"># 只看某个人的记录</span></span><br><span class="line">git <span class="built_in">log</span> --author=hzzzzzzzq</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每条提交记录只占一行的输出（压缩之后</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看哪些文件有变动</span></span><br><span class="line">git <span class="built_in">log</span> --name-status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果这些不够使用，可以查看更多的 git log 信息</span></span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<h2 id="回退"><a href="#回退" class="headerlink" title="回退"></a>回退</h2><p>有时候，可能在 <code>commit</code> 时，发现有错误，或者在 <code>push</code> 时，发现 <code>commit log</code> 信息错误，不允许提交(当然这是在公司项目配置的情况下才会发生)，我们就需要对提交进行回退，去修改错误或者修改 <code>commit log</code> 信息。</p>
<p>当然，还有命令时是用于版本回退的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 回退信息 - 回退一次，数字表示回退次数</span></span><br><span class="line">git reset HEAD~1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取服务器上最新的版本历史，并让本地分支指向它</span></span><br><span class="line">git fetch origin</span><br><span class="line">git reset --hard origin/master</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-12-Module-%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-12-Module-%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">ES 6 系列之Module 语法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:59:24 / 修改时间：13:02:19" itemprop="dateCreated datePublished" datetime="2022-01-18T12:59:24+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>在 ES 6 之前，社区制定了一些模块加载方案，最主要的就是 <a href=""><code>CommonJS</code></a> 和 AMD 两种。前者主要用于服务器，后者用于浏览器。ES 6 在语言层面上实现了模块功能，可以取代 <a href=""><code>CommonJS</code></a> 和 AMD 规范，成为了通用的模块解决方案。</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p><code>module</code> 主要由 <code>export</code> 和 <code>import</code> 两个命令。<code>export</code> 命令用于规定模块的对外接口，<code>import</code> 命令用于输入其他模块功能。<br>每一个模块都是一个独立文件，文件内的所有变量，外部无法获取，如果希望在外部获取，就必须使用 <code>export</code> 命令进行输出。<br>我们创建一个 <code>export.js</code> 文件，来写 <code>export</code> 相关内容，<code>import.js</code> 作为 <code>import</code> 导入相关内容。</p>
<h3 id="export-命令"><a href="#export-命令" class="headerlink" title="export 命令"></a>export 命令</h3><p>先看看 <code>export</code> 命令的写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> height = <span class="number">1.78</span>;</span><br></pre></td></tr></table></figure>

<p>上面是一种每一个都导出的写法，也可以看一下另外一种写法，使用一起导出的方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">const</span> height = <span class="number">1.78</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; name, age, height &#125;;</span><br></pre></td></tr></table></figure>

<p>两种写法是相同的。<br>当然 export 命令肯定不只是只能导出变量，还可以导出函数或者类。<br>来看看函数导出吧，还是用老朋友 <code>add</code> 来看吧。<br>当然， function 和 class 的输出，必须使用这样的格式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; add &#125;;</span><br></pre></td></tr></table></figure>

<p>在导出的时候，需要注意的是，<strong>导出的变量必须与模块内部的变量建立一一对应关系</strong>。</p>
<h3 id="import-命令"><a href="#import-命令" class="headerlink" title="import 命令"></a>import 命令</h3><p>使用 <code>import</code> 命令导入 <code>export.js</code> 文件，然后打印。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age, height, add &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name, age, height);</span><br><span class="line"><span class="comment">// hzzzzzzzq 18 1.78</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>如果想要自己重新命名，在 <code>import</code> 时，要使用 <code>as</code> 关键字，比如我将 <code>add</code> 改为 <code>sum</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add <span class="keyword">as</span> sum &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>需要注意的是</p>
<ul>
<li><code>import</code> 命令具有提升效果，会提升到整个模块的顶部，首先执行。</li>
<li><code>import</code> 是静态执行，不可以使用表达式或者变量</li>
<li>多次重复执行同一句 <code>import</code> ，那么只会执行一次，不会多次执行。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; name &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>; <span class="comment">// 与上一句相同</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">import</span> &#123; add, name &#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="string">&#x27;a&#x27;</span> + <span class="string">&#x27;dd&#x27;</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>; <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h3 id="模块的整体加载"><a href="#模块的整体加载" class="headerlink" title="模块的整体加载"></a>模块的整体加载</h3><p>导入时，除了一个一个的导入，还有一种整体导入方式，就是使用( <code>*</code> )来指定一个对象。</p>
<p>我们来看看刚刚的全部导入方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> all <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(all.name, all.age, all.height); <span class="comment">// hzzzzzzzq 18 1.78</span></span><br><span class="line"><span class="built_in">console</span>.log(all.add(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>这种方式，模块整体加载所在的那个对象，也就是 <code>all</code> 对象。</p>
<h3 id="export-default-命令"><a href="#export-default-命令" class="headerlink" title="export default 命令"></a>export default 命令</h3><p>导出还有一种 <code>export default</code> 命令，这种导出方式就是指定默认输出。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export.js</span></span><br><span class="line"><span class="comment">// 例子 类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> () </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="comment">// 例子 函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种导出方式，不需要固定的名称，来对应，可以直接使用匿名类或匿名函数，也可以不用匿名，但是导出时，都是可以任意命名。</p>
<p>导入时不需要使用 <code>&#123;&#125;</code> 来包裹，可以直接命名，使用任何名称命名导入。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子 类</span></span><br><span class="line"><span class="keyword">import</span> Obj <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Obj();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="comment">// 例子 函数</span></span><br><span class="line"><span class="keyword">import</span> add <span class="keyword">from</span> <span class="string">&#x27;./export.js&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在正常开发当中，最常使用的一些 <code>export</code> 、<code>improt</code> 以及一些 <code>export default</code> 的方法。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-11-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8Basync%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-11-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8Basync%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">ES 6 系列之Async/await</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:59:13 / 修改时间：13:02:06" itemprop="dateCreated datePublished" datetime="2022-01-18T12:59:13+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><code>async</code> 函数时什么，其实就是 <code>Generator</code> 的语法糖，只需要将 <code>*</code> 改写成 <code>async</code>，<code>yield</code> 改写成 <code>await</code>。<br>我们来看看 <code>Generator</code> 的写法，与 <code>async</code> 的写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(fileName);</span><br><span class="line">      resolve(fileName); <span class="comment">// 需要给 `Promise` 一个状态转化，就是异步执行是否成功</span></span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">genator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName1&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName2&#x27;</span>, <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName3&#x27;</span>, <span class="number">3000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;打印完毕&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = genator();</span><br><span class="line">gen.next(); <span class="comment">// fileName1</span></span><br><span class="line">gen.next(); <span class="comment">// fileName2</span></span><br><span class="line">gen.next(); <span class="comment">// fileName3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName1&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName2&#x27;</span>, <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName3&#x27;</span>, <span class="number">3000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;执行完毕&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">asyncTest();</span><br><span class="line"><span class="comment">// fileName1</span></span><br><span class="line"><span class="comment">// fileName2</span></span><br><span class="line"><span class="comment">// fileName3</span></span><br><span class="line"><span class="comment">// 执行完毕</span></span><br></pre></td></tr></table></figure>

<p>从上面我们可以看出，我们需要手动调用 <code>next</code> 方法，来执行下一步。<br>而 <code>async</code> 有自己内置执行器。</p>
<p>我们来看看 <code>async</code> 对 <code>Generator</code> 的改进。</p>
<ul>
<li>内置执行器<br>Generator 函数执行需要 <code>next</code> 执行器，外面手动调用，所以有 <code>co</code> 模块，而 async 函数自带执行器，与普通函数一样，只需要一行调用。<br>下面代码中，调用了该函数之后，就会自动执行，输出最后结果。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asyncTest();</span><br></pre></td></tr></table></figure>

<ul>
<li><p>语义更好<br><code>async/await</code>，比起 <code>Generator</code> 函数的 <code>*</code> 与 <code>yield</code>，语义更清晰。 <code>async</code> 就表示异步，而 <code>await</code> 表示后面的表达式需要等待结果。</p>
</li>
<li><p>适用性更强<br><code>co</code> 模块约定，<code>yield</code> 后面只能是 <code>Thunk</code> 函数或者 <code>Promise</code> 对象，而 <code>await</code> 后面可以是 <code>Promise</code>，也可以是原始类型值。</p>
</li>
<li><p>返回值是 <code>Promise</code><br><code>async</code> 函数返回值是 <code>Promise</code> 对象，可以用 <code>then</code> 方法来进行下一步操作。<br><code>await</code> 命令就是内部 <code>then</code> 命令的语法糖。</p>
</li>
</ul>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><h3 id="返回-Promise-对象"><a href="#返回-Promise-对象" class="headerlink" title="返回 Promise 对象"></a>返回 Promise 对象</h3><ul>
<li><code>async</code> 函数返回一个 <code>Promise</code> 对象，可以使用 <code>then</code> 方法加入回调函数。</li>
<li>执行函数时，遇到 <code>await</code> 就会先返回，等异步操作结束，再继续执行函数体后面的语句。</li>
<li>必须等到内部所有 <code>await</code> 命令后面的 <code>Promise</code> 对象执行完毕，状态才会改变，除非遇到 <code>return</code> 或者报错。</li>
<li><code>async</code> 函数内部的异步操作执行完毕，就可以执行 <code>then</code> 方法。</li>
<li><code>JS</code> 没有休眠的语法，但是借助 <code>await</code> 命令就可以让程序停顿一定的时间。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">useAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// readFile 使用的是本文顶部的方法</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> readFile(<span class="string">&#x27;fileName&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">useAsync().then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// fileName</span></span><br><span class="line"><span class="comment">// fileName</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果返回 <code>reject</code> 状态，则会中断执行，并通过 <code>catch</code> 捕获</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">useAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// readFile 使用的是本文顶部的方法</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;测试错误&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;打印？&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">useAsync()</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// 测试错误</span></span><br></pre></td></tr></table></figure>

<h3 id="await-命令"><a href="#await-命令" class="headerlink" title="await 命令"></a>await 命令</h3><p><code>await</code> 命令后面是一个 <code>Promise</code> 对象，返回结果。如果不是 <code>Promise</code>，就直接返回对应值。</p>
<ul>
<li><code>await</code> 命令只能出现在 <code>async</code> 命令函数内部，不然会报错。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">useAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">useAsync().then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p><code>await</code> 后面跟着 <code>add</code> 方法，算出一个数值 <code>3</code>，然后将值 <code>return</code> 出来。</p>
<hr>
<p>简单的 <code>await</code> 使用方法，就是如此。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-10-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BGenerator%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-10-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BGenerator%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">ES 6 系列之Generator 函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:57 / 修改时间：13:01:50" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:57+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><code>Generator</code> 是 <code>ES 6</code> 提供的一种异步编程解决方案。</p>
<ul>
<li>函数定义时，在 <code>funciton</code> 后面添加一个星号(<code>*</code>)</li>
<li>函数体内部使用 <code>yield</code> 表达式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generator</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Generator</code> 函数的调用方式与普通函数是一样的，在函数名后面加上一对圆括号。</p>
<h3 id="yield-表达式"><a href="#yield-表达式" class="headerlink" title="yield 表达式"></a>yield 表达式</h3><p><code>yield</code> 表达式就是 <code>Generator</code> 的暂停标志。</p>
<ul>
<li>遇到 <code>yield</code> 表达式，就会停止执行后面的操作，<code>yield</code> 后面表达式的值，作为返回对象的 <code>value</code> 属性值</li>
<li>下次调用 <code>next</code> 方法时，才会继续执行代码，直到下一个 <code>yield</code></li>
<li>如果没有遇到遇到 <code>yield</code>，则运行至结束，看是否有 <code>return</code>，如果有，则 <code>return</code> 后面的值作为返回对象的 <code>value</code></li>
<li>如果没有 <code>yield</code> 或 <code>return</code>，则返回 <code>value</code> 为 <code>undefined</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>; <span class="comment">// 第一个 next 时，执行</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>; <span class="comment">// 第二个 next 时，执行</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span>; <span class="comment">// 第三个 next 时，执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，我们可以来感受上面的用途。</p>
<p>只有在调用 <code>next</code> 方法将指针移到这一句时，才会进行求值。</p>
<p>与 <code>return</code> 不同的地方在于，<code>return</code> 不具备记忆功能，也就说，在一个函数中，<code>return</code> 只能执行一次，而 yield 具备记忆功能，可以通过 <code>next</code> 方法继续执行代码。</p>
<h2 id="next-方法"><a href="#next-方法" class="headerlink" title="next 方法"></a>next 方法</h2><h3 id="next-普通使用"><a href="#next-普通使用" class="headerlink" title="next 普通使用"></a>next 普通使用</h3><p><code>next</code> 方法就是 <code>generator</code> 函数的内置执行器，如果遇到 <code>yield</code> 时，只有通过调用 <code>next</code>，才会继续执行代码。</p>
<p>而 <code>next</code> 代码的执行值，我们可以打印来看，会是一个对象，带有 <code>value</code> 和 <code>done</code> 两个属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: &#x27;hello&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: &#x27;hzzzzzzzq&#x27;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: &#x27;good&#x27;, done: true &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>value</code> 值显示的是 <code>yield</code> 或者 <code>return</code> 后面的返回值。</li>
<li><code>done</code> 是一个布尔值，表示遍历是否结束，<code>true</code> 表示结束。</li>
<li>当然，<code>return</code> 只能有一个，且 <code>return</code> 之后不能有 <code>yield</code>，因为 <code>return</code>，就会让 <code>done</code> 变成 <code>true</code>。</li>
</ul>
<h3 id="next-方法参数"><a href="#next-方法参数" class="headerlink" title="next 方法参数"></a>next 方法参数</h3><p><code>next</code> 方法可以带一个参数，<strong>该参数会被当作上一个 <code>yield</code> 表达式的值</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="keyword">yield</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="built_in">console</span>.log(gen.next());</span><br><span class="line"><span class="built_in">console</span>.log(gen.next(<span class="string">&#x27;world&#x27;</span>));</span><br><span class="line"><span class="comment">// &#123; value: null, done: false &#125;</span></span><br><span class="line"><span class="comment">// world</span></span><br><span class="line"><span class="comment">// &#123; value: &#x27;null&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<p>当然，这个是会被当作上一个 <code>yield</code> 表达式的值，是在函数内部使用，并不是在 <code>next</code> 返回对象中作为 <code>value</code> 的键值返回。他会替换 <code>generator</code> 函数体内的上一个 <code>yield</code> 值并赋值给我们定义的变量 <code>value</code>。</p>
<h2 id="for…of-循环"><a href="#for…of-循环" class="headerlink" title="for…of 循环"></a>for…of 循环</h2><p><code>for...of</code> 循环可以自动遍历 <code>Generator</code> 函数运行时生成的 <code>Interator</code> 对象，不需要手动调用 <code>next</code> 方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;one&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;two&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;three&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;four&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;five&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> gen()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// one two three four</span></span><br></pre></td></tr></table></figure>

<p>注意：如果 <code>done</code> 为 <code>true</code>，则会被立刻终止，所有最后一句 <code>return</code> 语句不在循环中。</p>
<p>处理 <code>for...of</code> 循环之外，扩展运算符，解构赋值和 <code>Array.from</code> 方法内部调用的，都是遍历器接口。<br>都可以将 <code>Generator</code> 函数作为返回的 <code>Interator</code> 对象，作为参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;one&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;two&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;three&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;four&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;five&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log([...gen()]);</span><br><span class="line"><span class="comment">// [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, &#x27;four&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from(gen()));</span><br><span class="line"><span class="comment">// [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, &#x27;four&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y, z] = gen();</span><br><span class="line"><span class="built_in">console</span>.log(x, y, z);</span><br><span class="line"><span class="comment">// one two three</span></span><br></pre></td></tr></table></figure>

<h2 id="yield"><a href="#yield" class="headerlink" title="yield*"></a>yield*</h2><p><code>yield*</code> 就是 用来在一个 <code>Generator</code> 函数里面执行另一个 <code>Generator</code> 函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span>* generator1();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// hello</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// hzzzzzzzq</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// good</span></span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>我们在 <code>generator</code> 函数中，使用了 <code>yield*</code> ，后面调用 <code>generator1</code> 函数。</p>
<p>然后我们就可以直接使用 <code>next</code> 函数，跟普通的 <code>generator</code> 函数一样使用就可以。</p>
<h2 id="Generator-prototype-throw-return"><a href="#Generator-prototype-throw-return" class="headerlink" title="Generator.prototype.throw() / return()"></a>Generator.prototype.throw() / return()</h2><h3 id="throw"><a href="#throw" class="headerlink" title="throw()"></a>throw()</h3><p><code>Generator</code> 函数返回的遍历器对象，都会有个 <code>throw</code> 方法，可以在函数体外抛出错误，然后在 <code>Generator</code> 函数体内捕获。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;内部&#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> gen = generator();</span><br><span class="line">gen.next();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  gen.throw(<span class="string">&#x27;错误1&#x27;</span>);</span><br><span class="line">  gen.throw(<span class="string">&#x27;错误2&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;外部&#x27;</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 内部 错误1</span></span><br><span class="line"><span class="comment">// 外部 错误2</span></span><br></pre></td></tr></table></figure>

<p>在上面的例子中，我们可以看出，第一个 <code>throw</code> 被函数体内部的 <code>catch</code> 语句捕获，然而第二个错误，在内部已经执行过 <code>catch</code>，所有这个错误就被抛出来了，被外面的 <code>try...catch</code> 捕获。</p>
<h3 id="return"><a href="#return" class="headerlink" title="return()"></a>return()</h3><p><code>Generator</code> 函数返回的对象中，还有一个 <code>return</code> 方法，可以返回给定的值，并且结束 <code>Generator</code> 函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;hzzzzzzzq&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line">gen.next(); <span class="comment">// &#123; value: &#x27;hello&#x27;, done: false &#125;</span></span><br><span class="line">gen.return(<span class="string">&#x27;world&#x27;</span>); <span class="comment">// &#123; value: &#x27;world&#x27;, done: true &#125;</span></span><br><span class="line">gen.next(); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<p>从上面的例子，我们可以看出，执行 <code>return</code> 之后，后面的 <code>done</code> 就会变为 <code>true</code>，且传入的参数会作为返回对象的 <code>value</code> 值。</p>
<p>在以后调用时，都会被调整为 <code>undefined</code>，其实就相当于，将 <code>generator</code> 函数中的添加一个 <code>return</code> 。</p>
<h2 id="Generator-函数的异步操作"><a href="#Generator-函数的异步操作" class="headerlink" title="Generator 函数的异步操作"></a>Generator 函数的异步操作</h2><p>我们使用一个 <code>readFile</code>，使用 <code>setTimeout</code> 假装调用接口，然后调用 <code>gen.next()</code> 接口返回对象的 <code>value</code> 属性值进行下一步操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">&#x27;异步请求成功回调&#x27;</span>); <span class="comment">// 需要给 `Promise` 一个状态转化，就是异步执行是否成功</span></span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> str = <span class="keyword">yield</span> readFile(<span class="string">&#x27;fileName1&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> gen = generator();</span><br><span class="line"><span class="keyword">const</span> result = gen.next(); <span class="comment">// fileName1</span></span><br><span class="line">result.value</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">val2</span>) =&gt;</span> &#123;</span><br><span class="line">    gen.next(<span class="string">&#x27;异步请求结果&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// 异步请求成功回调</span></span><br><span class="line"><span class="comment">// 异步请求结果</span></span><br></pre></td></tr></table></figure>

<p><code>yield</code> 后面用来调用异步函数，然后返回结果输出。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-9-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BPromise-%E5%AF%B9%E8%B1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-9-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E4%B9%8BPromise-%E5%AF%B9%E8%B1%A1/" class="post-title-link" itemprop="url">ES 6 系列之Promise 对象</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:47 / 修改时间：13:01:37" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:47+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h2><p><strong>Promise 是异步编程的一种解决方案</strong>，在 <code>Promise</code> 之前，采用的是回调函数和事件，但是会存在一些问题，像回调地狱。而在 ES6 中，提供了 <code>Promise</code> 对象。</p>
<p><code>Promise</code> 简单来讲，其实就是一个容器，用来存储异步事件（例如网络请求等）。</p>
<p>语法上来说，<code>Promise</code> 是一个对象，可以获取异步操作的消息。</p>
<h3 id="主要特点"><a href="#主要特点" class="headerlink" title="主要特点"></a>主要特点</h3><ul>
<li>对象状态不受外界影响。<ul>
<li>一共只有三种状态：<code>pending</code> （进行中）、<code>fulfilled</code>（完成）和 <code>rejected</code>（失败）。只受异步操作的结果，可以决定当前是哪种状态，其他任何操作都无法改变这个状态。</li>
</ul>
</li>
<li>一旦状态改变，就不能再变，任何时候都可以得到这个结果。<ul>
<li>Promise 对象状态改变只有两种可能性，从<code>pending</code> 到 <code>fulfilled</code> 和从 <code>pending</code> 到 <code>rejected</code>。</li>
</ul>
</li>
</ul>
<h3 id="主要缺陷"><a href="#主要缺陷" class="headerlink" title="主要缺陷"></a>主要缺陷</h3><ul>
<li>一旦创建会立即执行，无法中途取消。</li>
<li>如果内部不设置回调函数，外部是不能知道内部情况的。</li>
<li>当状态处于 <code>pending</code> 时，无法得知目前进展到哪个阶段。</li>
</ul>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>这里一般需要进行异步操作，但是为了学习方便，我们直接同步进行了。<br><code>Promise</code> 构造函数接受一个函数作为参数，该函数的参数为 <code>resolve</code> 和 <code>reject</code>。 <code>resolve</code> 和 <code>reject</code> 是两个函数，有 JS 引擎提供，不需要自己部署。<br><code>resolve</code> 函数作用是将 <code>Promise</code> 的状态从 <code>pending</code> 变为 <code>resolved</code>，并且将操作结果作为参数传递出去。<br><code>reject</code> 函数作用是将 <code>Promise</code> 的状态从 <code>pending</code> 变为 <code>rejected</code>，并且将错误信息传递出去。<br><code>Promise</code> 生成实例之后，可以调用 <code>then</code> 方法，其中包含两个函数参数。第一个函数包含 <code>resolved</code> 状态的结果，第二个包含 <code>rejected</code> 状态结果。两个函数都是可选参数。</p>
<p>我们将 <code>flag</code> 比做异步操作，<code>true</code> 表示异步成功，<code>false</code> 表示异步失败。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(<span class="string">&#x27;操作失败&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(</span><br><span class="line">  <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;value = &#x27;</span>, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;error = &#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>从上面的代码来看，<code>flag</code> 为 <code>true</code> 时，会打印 <code>value = 操作成功</code>，为 false 时，打印 <code>error = 操作失败</code>。</p>
<p>我们来看看 <code>then</code> 的异步。<br>在 <code>Promise</code> 创建时，就会立即执行，而 <code>then</code> 会在当前脚本所有同步任务执行完才会执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line"><span class="comment">// &#x27;1&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;3&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;2&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><h3 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h3><p><code>Promise.prototype.then()</code> 方法作用是为 <code>Promise</code> 实例添加状态改变时的回调函数。<br><code>then</code> 方法的第一个参数是 <code>resolved</code> 状态的回调函数，第二个参数是 <code>rejected</code> 状态的回调函数，它们都是可选的值，不一定必须传入。</p>
<p><code>then</code> 方法返回的是一个新的 <code>Promise</code> 实例，所以可以采用链式写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// &#x27;1&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h3><p><code>Promise.prototype.catch()</code> 方法就是在 <code>then</code> 方法时 <code>reject</code> 的情况，用于发生错误时的回调函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#x27;1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果在 <code>Promise</code> 中报错，进行错误抛出，状态会变为 <code>rejected</code>，就会调用 <code>catch()</code> 方法指定的回调函数，然后在其中处理错误。</p>
<p>当然，如果在运行过程中，抛出错误，也会被 <code>catch</code> 捕获。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Error&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#x27;Error&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h3><p><code>Promise.prototype.finally()</code> 方法不管 <code>Promise</code> 对象最后状态如何，都会进行执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise1.finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;执行finally&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 执行finally</span></span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;失败&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise2.finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;执行finally&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 执行finally</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise-类方法"><a href="#Promise-类方法" class="headerlink" title="Promise 类方法"></a>Promise 类方法</h2><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><p><code>Promise.all()</code> 方法可以将多个 <code>Promise</code> 实例，包装成一个新的 <code>Promise</code> 实例。</p>
<ul>
<li>多个 <code>Promise</code> 中，其中一个状态不是 <code>fulfilled</code>，p 的结果就不会是 <code>fulfilled</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.all([promise1, promise2, promise3]);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>只要有一个状态变为 <code>rejected</code>，此时<strong>第一个</strong>被 <code>reject</code> 的实例的返回值，会被传递为 <code>promise</code> 的回调函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们将上面的代码其中一个 resolve 修改为 reject(&#x27;1&#x27;)</span></span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.all([promise1, promise2, promise3]);</span><br><span class="line"></span><br><span class="line">promise.then(</span><br><span class="line">  <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error); <span class="comment">// 3</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h3><p><code>Promise.race()</code> 方法同样是将多个实例包装为一个新的 <code>Promise</code> 实例。</p>
<ul>
<li>多个 <code>Promise</code> 时，哪一个率先改变状态，<code>promise</code> 的状态就跟着哪个改变。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.race([promise1, promise2, promise3]);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>我们在第一个使用了 <code>setTimeout</code>，进行延迟，所以会是第二个的状态先改变，输出第二个的值。</p>
<h3 id="Promsie-allSettled"><a href="#Promsie-allSettled" class="headerlink" title="Promsie.allSettled()"></a>Promsie.allSettled()</h3><p><code>Promise.allSettled()</code> 方法，用来确定一组异步操作是否都结束了。<br>数组的每个成员都是一个 Promise 对象，并返回一个新的 <code>Promise</code> 对象，只有数组中的 <code>Promsie</code> 对象状态都发生改变时，返回的 <code>Promise</code> 对象才发生改变。<br>返回的值会接收到一个数组作为参数，该数组的每一个成员对应前面数组的每个 <code>Promise</code> 对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.allSettled([promise1, promise2, promise3]);</span><br><span class="line">promise.then(</span><br><span class="line">  <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     status: &#x27;rejected&#x27;,</span></span><br><span class="line"><span class="comment">//     reason: &#x27;1&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     status: &#x27;fulfilled&#x27;,</span></span><br><span class="line"><span class="comment">//     value: &#x27;2&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   &#123;</span></span><br><span class="line"><span class="comment">//     status: &#x27;rejected&#x27;,</span></span><br><span class="line"><span class="comment">//     reason: &#x27;3&#x27;,</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">// ];</span></span><br></pre></td></tr></table></figure>

<p>数组成员对象的 <code>status</code> 属性的值只可能是 <code>fulfilled</code> 或 <code>rejected</code>，用来区别异步操作结果是成功(<code>fulfilled</code>)还是失败(<code>rejected</code>)。<br>如果是成功是会有 <code>value</code> 属性，记录成功值，如果失败，会有 <code>reason</code> 属性，记录失败原因。</p>
<h3 id="Promise-any"><a href="#Promise-any" class="headerlink" title="Promise.any()"></a>Promise.any()</h3><p><code>Promise.any()</code> 方法，将一组 <code>Promise</code> 实例作为参数，包装成一个新的 <code>Promise</code> 实例并返回。</p>
<ul>
<li>只要有一个变成 <code>fulfilled</code> 状态，新实例就会被包装成 <code>fulfilled</code> 状态</li>
<li>如果所有参数实例都变成 <code>rejected</code> 状态，包装实例就会变成 <code>rejected</code> 状态</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Promise</span>.any([promise1, promise2, promise3])</span><br><span class="line">  .then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 只要有一个成功</span></span><br><span class="line">    <span class="built_in">console</span>.log(val);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve()"></a>Promise.resolve()</h3><p><code>Promise.resolve()</code> 方法有四种情况。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;请求成功&#x27;</span>);</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> resolve(<span class="string">&#x27;请求成功&#x27;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>参数为 <code>Promise</code> 时，不做任何修改，直接返回这个实例。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> resolve(<span class="string">&#x27;请求成功&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="built_in">Promise</span>.resolve(promise);</span><br><span class="line">promise1.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>参数是 <code>thenable</code> 对象<br><code>thenable</code> 对象就是有 <code>then</code> 方法的对象。<br><code>Promise.resolve()</code> 方法会将 <code>thenable</code> 转为 <code>Promise</code> 对象，并立即执行其中的 <code>then</code> 方法。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thenable = &#123;</span><br><span class="line">  <span class="attr">then</span>: <span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    resolve(<span class="string">&#x27;成功&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve(thenable);</span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 成功</span></span><br></pre></td></tr></table></figure>

<ul>
<li>参数无 <code>then</code> 的对象，或不是对象的参数<br><code>Promise.resolve()</code> 方法返回一个心的 Promise 对象，状态转为 <code>resolved</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;成功&#x27;</span>);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 成功</span></span><br></pre></td></tr></table></figure>

<ul>
<li>不带参数<br><code>Promise.resolve()</code> 方法可以不传参数，直接返回一个 <code>resolved</code> 状态的 <code>Promise</code> 对象。<br>所以在希望得到一个 <code>Promise</code> 对象，直接调用比较该方法方便。</li>
</ul>
<p>注意，立即 <code>resolve()</code> 的 <code>Promise</code> 对象，是在本轮<a href="">事件循环（event loop）</a>的结束时执行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.resolve();</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;不带参数&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 事件循环</span></span><br><span class="line"><span class="comment">// 不带参数</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;事件循环&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject()"></a>Promise.reject()</h3><p><code>Promise.reject()</code> 方法返回一个新 <code>Promise</code> 实例，该实例状态为 <code>rejected</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="built_in">Promise</span>.reject(<span class="string">&#x27;出错了的Promise&#x27;</span>);</span><br><span class="line"><span class="comment">// 同价</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;出错了的Promise&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="literal">null</span>, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 出错了的Promise</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-8-Set-%E5%92%8C-Map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-8-Set-%E5%92%8C-Map/" class="post-title-link" itemprop="url">ES 6 系列之Set 和 Map</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:41 / 修改时间：13:01:22" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:41+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p><code>Set</code> 是 <code>ES 6</code> 提供的新的数据结构。类似于数组，但是都是唯一值，没有重复值。<br><code>Set</code> 就是一个构造函数，用来生成 <code>Set</code> 数据结构。<br><code>add()</code> 就是为 <code>Set</code> 添加成员，我们来试试。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">set.add(<span class="number">1</span>);</span><br><span class="line">set.add(<span class="number">2</span>);</span><br><span class="line">set.add(<span class="number">3</span>);</span><br><span class="line">set.add(<span class="number">2</span>);</span><br><span class="line">set.add(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> s <span class="keyword">of</span> set) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>

<p>代码中可以看出 <code>Set</code> 的数据结构，是不会添加重复的值。</p>
<p><code>Set</code> 构造函数可以接受一个数组或者具有 iterable 接口的其他数据结构作为参数，用来初始化 <code>Set</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set);</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<p>从这里，我们也可以看出，用于数组去重是一个很好的选择</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> arr1 = [...new <span class="built_in">Set</span>(arr)];</span><br><span class="line"><span class="built_in">console</span>.log(arr1);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h3 id="Set-实例属性和方法"><a href="#Set-实例属性和方法" class="headerlink" title="Set 实例属性和方法"></a>Set 实例属性和方法</h3><p><strong>实例属性</strong></p>
<ul>
<li><code>Set.prototype.constructor</code>: 构造函数，默认就是 <code>Set()</code>。</li>
<li><code>Set.prototype.size</code>: 返回 <code>Set</code> 成员总数。</li>
</ul>
<p><strong>实例方法</strong></p>
<ul>
<li><code>Set.prototype.add(value)</code>: 添加元素到 <code>Set</code>，返回 <code>Set</code> 本身。</li>
<li><code>Set.prototype.delete(value)</code>: 删除某个值，返回一个布尔值。</li>
<li><code>Set.prototype.has(value)</code>: 返回一个布尔值，表示该值是否为 <code>Set</code> 的值。</li>
<li><code>Set.prototype.clear()</code>: 清除所有值。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">set.add(<span class="number">1</span>);</span><br><span class="line">set.add(<span class="number">5</span>);</span><br><span class="line">set.add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set.size); <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">5</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">2</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">set.delete(<span class="number">5</span>);</span><br><span class="line">set.delete(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">5</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">4</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="遍历操作"><a href="#遍历操作" class="headerlink" title="遍历操作"></a>遍历操作</h3><p>四个遍历方法。</p>
<ul>
<li><code>Set.prototype.keys()</code>: 返回 <code>key</code> 的遍历器</li>
<li><code>Set.prototype.values()</code>: 返回 <code>value</code> 的遍历器</li>
<li><code>Set.prototype.entries()</code>: 返回 <code>key: values</code> 的遍历器</li>
<li><code>Set.prototype.forEach()</code>: 回调函数遍历，类似数组的 <code>forEach</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&#x27;key1&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>, <span class="string">&#x27;key3&#x27;</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> set.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1</span></span><br><span class="line"><span class="comment">// key2</span></span><br><span class="line"><span class="comment">// key3</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> set.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1</span></span><br><span class="line"><span class="comment">// key2</span></span><br><span class="line"><span class="comment">// key3</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> set.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(k, v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1 key1</span></span><br><span class="line"><span class="comment">// key2 key2</span></span><br><span class="line"><span class="comment">// key3 key3</span></span><br><span class="line"></span><br><span class="line">set.forEach(<span class="function">(<span class="params">val, key</span>) =&gt;</span> <span class="built_in">console</span>.log(key, val));</span><br><span class="line"><span class="comment">// key1 key1</span></span><br><span class="line"><span class="comment">// key2 key2</span></span><br><span class="line"><span class="comment">// key3 key3</span></span><br></pre></td></tr></table></figure>

<p>由遍历，我们可以看出，<code>key</code> 与 <code>value</code> 的值是相同的。</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p><code>ES 6</code> 提供了 <code>Map</code> 数据结构。类似于对象，也是键值对的集合，但是 <code>key</code> 不限制于字符串，其他类型的值均可以作为 <code>key</code>。 简单来说 <code>Map</code> 结构提供了 <code>val - val</code>，而对象必须是 <strong>字符串 - val</strong>。</p>
<p><code>map</code> 的简单用法。也看看将对象作为 <code>key</code> 的时候。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">map.set(obj, <span class="string">&#x27;object&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(obj)); <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line">map.set(<span class="string">&#x27;string&#x27;</span>, <span class="string">&#x27;hello hzzzzzzzq&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// &#x27;hello hzzzzzzzq&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.has(obj)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;string&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>上面我们就可以看出，我们将对象 <code>obj</code> 作为一个<code>Map</code> 的键传入，使用 <code>get</code> 获取值，<code>delete</code> 删除，<code>has</code> 作为判断是否有这个值。</p>
<p>我们在来看看，<code>Map</code> 作为构造函数，怎么添加成员。<br>其实在<a href="">对象的扩展</a>中，我们已经提到过了。</p>
<ul>
<li>接受数组作为参数，而数组的成员是一个个表示键值对的数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>],</span><br><span class="line">]);</span><br><span class="line"><span class="built_in">console</span>.log(map.size); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>任何具有 <code>Iterator</code> 接口，且每个成员都是一个双元素的数组的结构都可以当作 <code>Map</code> 的参数。<code>Set</code> 和 <code>Map</code> 自身也可以作为参数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([[<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>]]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>(set);</span><br><span class="line"><span class="built_in">console</span>.log(map1.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map2.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map3 = <span class="keyword">new</span> <span class="built_in">Map</span>(map2);</span><br><span class="line"><span class="built_in">console</span>.log(map3.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map 与 Set 类似，如果有重复 <code>key</code> 时，后面的 <code>val</code> 会覆盖前面的 <code>val</code>，也就是说，<code>map</code> 也是唯一的。</li>
<li>Map 中若是没有找到这个 <code>key</code>，则返回 <code>undefined</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="Map-属性和操作"><a href="#Map-属性和操作" class="headerlink" title="Map 属性和操作"></a>Map 属性和操作</h3><ul>
<li>size<br><code>size</code> 返回 <code>Map</code> 的成员数量。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.size); <span class="comment">// 1</span></span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.size); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.set(key, val)<br><code>set(key, val)</code> 方法就是为 Map 添加新的值了。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>); <span class="comment">// 键是字符串</span></span><br><span class="line">map.set(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 键是数值</span></span><br><span class="line">map.set(<span class="literal">undefined</span>, <span class="number">3</span>); <span class="comment">// 键是 undefined</span></span><br><span class="line">map.set(<span class="literal">null</span>, <span class="number">4</span>); <span class="comment">// 键时 null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="number">1</span>)); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="literal">undefined</span>)); <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="literal">null</span>)); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.get(key)<br><code>get(key)</code> 方法获取 <code>key</code> 对应的 <code>val</code>，找不到则返回 undefined。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.has(key);<br><code>has(key)</code> 方法判断键名 <code>key</code> 是否在 <code>Map</code> 对象中。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.has(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.delete(key)<br><code>delete(key)</code> 方法删除某个键，返回一个布尔值，成功为 <code>true</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(map.delete(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Map.prototype.clear();<br><code>clear()</code> 就是清除 Map 对象的所有成员。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">map.clear();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&#x27;y&#x27;</span>)); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><p>与 <code>Set</code> 类似。</p>
<ul>
<li>Map.prototype.keys()： 返回 <code>Map</code> 对象的所有 <code>key</code>。</li>
<li>Map.prototype.values()：返回 <code>Map</code> 对象的所有 <code>val</code>。</li>
<li>Map.prototype.entries()：返回 <code>Map</code> 对象的所有成员的遍历器。</li>
<li>Map.prototype.forEach()：遍历 <code>Map</code> 的所有成员。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">map.set(<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> map.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> map.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(k, v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27; 1</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27; 2</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27; 3</span></span><br><span class="line"></span><br><span class="line">map.forEach(<span class="function">(<span class="params">val, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#x27;x&#x27; 1</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27; 2</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27; 3</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-7-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">ES 6 系列之对象的扩展</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:23 / 修改时间：13:01:05" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:23+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="属性的简单表示"><a href="#属性的简单表示" class="headerlink" title="属性的简单表示"></a>属性的简单表示</h2><p><code>ES 6</code> 允许将属性写在 <code>&#123;&#125;</code> 中，直接写入变量和函数，作为对象的属性和方法。这样的书写方式更加简洁。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="string">&#x27;foo&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123; foo, getName &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; foo: &#x27;foo&#x27;, getName: ƒunction &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES 6</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="string">&#x27;foo&#x27;</span>,</span><br><span class="line">  <span class="attr">getName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; foo: &#x27;foo&#x27;, getName: function &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="属性的可枚举性和遍历"><a href="#属性的可枚举性和遍历" class="headerlink" title="属性的可枚举性和遍历"></a>属性的可枚举性和遍历</h2><h3 id="可枚举性"><a href="#可枚举性" class="headerlink" title="可枚举性"></a>可枚举性</h3><p>对象的每个属性都有一个描述对象，用来控制该属性的行为。<br><code>Object.getOwnPropertyDescriptor</code> 方法来获取该属性的描述对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(obj));</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   &quot;value&quot;: 1,</span></span><br><span class="line"><span class="comment">//   &quot;writable&quot;: true,</span></span><br><span class="line"><span class="comment">//   &quot;enumerable&quot;: true,</span></span><br><span class="line"><span class="comment">//   &quot;configurable&quot;: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>描述对象的 <code>enumerable</code> 属性，称为<strong>可枚举性</strong>，如果该属性为 <code>false</code>，就会被某些操作忽略。</p>
<p>操作会忽略 <code>enumerable</code> 为 <code>false</code> 的属性。</p>
<ul>
<li><code>for...in</code> 循环：遍历对象自身和继承的可枚举属性。</li>
<li><code>Object.keys()</code>：返回对象所有可枚举的属性的 <code>key</code>。</li>
<li><code>JSON.stringify()</code>：只串行化对象自身的可枚举的属性。</li>
<li><code>Object.assign()</code>：只拷贝对象自身的可枚举属性。</li>
</ul>
<h3 id="属性遍历"><a href="#属性遍历" class="headerlink" title="属性遍历"></a>属性遍历</h3><ul>
<li><strong>for…in</strong><br><code>for...in</code> 循环对象自身的和继续的可枚举属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> o <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Object.keys(obj)</strong><br><code>Object.keys(obj)</code> 返回一个数组，包含所有可枚举属性的 <code>key</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> o <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Object.getOwnPropertyNames(obj)</strong><br><code>Object.getOwnPropertyNames(obj)</code> 返回一个数组，包含对象自身的所有属性的 <code>key</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> o <span class="keyword">of</span> <span class="built_in">Object</span>.getOwnPropertyNames(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Object.getOwnPropertySymbols(obj)</strong><br><code>Object.getOwnPropertySymbols(obj)</code> 返回一个数组，包含对象自身的所有 <code>Symbol</code> 属性的 <code>key</code>。<br>打印的属性均为 <code>Symbol</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>(<span class="string">&#x27;x&#x27;</span>)]: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(obj));</span><br><span class="line"><span class="comment">// [Symbol(x)]</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Reflect.ownKeys(obj)</strong><br><code>Reflect.ownKeys(obj)</code> 返回一个数组，包含对象自身所有键名，不管键名是 <code>Symbol</code> 或字符串，也不管是否可枚举。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>(<span class="string">&#x27;x&#x27;</span>)]: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>, <span class="number">1</span>: <span class="number">10</span>, <span class="number">2</span>: <span class="number">11</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(obj));</span><br><span class="line"><span class="comment">// [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;y&#x27;, &#x27;z&#x27;, Symbol(x)]</span></span><br></pre></td></tr></table></figure>

<p>一共五种遍历 <code>key</code> 的方式，但是遍历的次序是有规则的。</p>
<blockquote>
<ul>
<li>首先遍历所有数值，并按照升序排列</li>
<li>其次遍历字符串，按照加入时间升序</li>
<li>最后才是 <code>Symbol</code>，按照加入时间升序</li>
</ul>
</blockquote>
<h2 id="对象的扩展运算符"><a href="#对象的扩展运算符" class="headerlink" title="对象的扩展运算符"></a>对象的扩展运算符</h2><p>在 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">解构赋值</a> 和 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/7">数组的扩展</a> 中，我们分别提到过对象的解构赋值以及扩展运算符。</p>
<p>我们来看看扩展运算符在对象中的使用。</p>
<h3 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h3><p>我们来回顾一下 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">解构赋值</a> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; x, y &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(y); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用扩展运算符时需要注意的是，解构赋值必须是最后一个参数且只能有一个，否则报错。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; x, ...obj &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; y: 1, z: 2 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; ...obj, z &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对象的解构赋值右侧不能是 <code>undefined</code> 或 <code>null</code>，会报错</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ...obj &#125; = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ...obj &#125; = <span class="literal">undefined</span>;</span><br><span class="line"><span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure>

<h3 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h3><p>对象的扩展运算符用于取出参数对象的所有可便利属性，拷贝到当前对象之中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; ...obj &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; x: 1, y: 2 &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组也是特殊的对象，所以对象的扩展运算符也可以用于数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ...[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>] &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">// &#123; 0: &#x27;1&#x27;, 1: &#x27;2&#x27;, 2: &#x27;3&#x27; &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果是空对象，则没有任何效果。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ...&#123;&#125;, <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; x: 1 &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果扩展运算符并不是对象，则会被自动转化成对象，但是部分值没有自身属性，所以会返回一个空对象 <code>&#123;&#125;</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ..<span class="number">.1</span> &#125;; <span class="comment">// 等同于 &#123; ...Object(1) &#125;</span></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; ...true &#125;; <span class="comment">// &#123; ...Object(true) &#125;</span></span><br><span class="line"><span class="keyword">const</span> obj3 = &#123; ...undefined &#125;; <span class="comment">// &#123; ...Object(undefined) &#125;</span></span><br><span class="line"><span class="keyword">const</span> obj4 = &#123; ...null &#125;; <span class="comment">// &#123; ...Object(null) &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果后面跟着字符串，则会自动转成类数组对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; ...<span class="string">&#x27;hzq&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; 0: &#x27;h&#x27;, 1: &#x27;z&#x27;, 2: &#x27;q&#x27; &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="对象新增的常用实例方法"><a href="#对象新增的常用实例方法" class="headerlink" title="对象新增的常用实例方法"></a>对象新增的常用实例方法</h2><h2 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is()"></a>Object.is()</h2><p><code>Object.is()</code> 是用来判断两个是否严格相等，与严格比较运算符 <code>===</code> 行为基本一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(&#123;&#125;, &#123;&#125;)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="与-不同点"><a href="#与-不同点" class="headerlink" title="与 === 不同点"></a>与 <code>===</code> 不同点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(+<span class="number">0</span> === -<span class="number">0</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> === <span class="literal">NaN</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(+<span class="number">0</span>, -<span class="number">0</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h2><p><code>Object.assign()</code> 放啊主要用于对象的合并，<strong>将对象的所有可枚举属性复制到目标对象</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(obj, obj1, obj2);</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">// &#123; x: 1, y: 2 &#125;</span></span><br></pre></td></tr></table></figure>

<p>从上面我们可以看出，第一个参数就是<strong>目标对象</strong>，将后面对象的所有<strong>可枚举属性</strong>复制到第一个参数。</p>
<ul>
<li>如果后面参数中，有同名属性，则目标对象中的值，会被新的对象替代</li>
<li>如果只有一个参数，则直接返回该参数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">y</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(obj, obj1, obj2);</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"><span class="comment">// &#123; x: 3, y: 4 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj3 = &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(obj3) === obj3);</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果参数不是对象，会被转成对象，然后返回</li>
<li><code>undefined</code> 和 <code>null</code> 无法转成对象，会报错</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// Number &#123;1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>.assign(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="literal">undefined</span>)); <span class="comment">// 报错</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.assign(<span class="literal">null</span>)); <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h2 id="Object-keys-，Object-values-，Object-entries"><a href="#Object-keys-，Object-values-，Object-entries" class="headerlink" title="Object.keys()，Object.values()，Object.entries()"></a>Object.keys()，Object.values()，Object.entries()</h2><h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a>Object.keys()</h3><p><code>Obejct.keys()</code> 是 <code>ES 5</code> 引入的，我们还是在这里稍微提一下。<strong>Object.keys()返回对象键值的数组，然后用来遍历对象的 key。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// y</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values()"></a>Object.values()</h3><p><code>Object.values()</code> 是 <code>ES 6</code> 时引入的，返回一个数组，是每个键对应的值。返回值的顺序可以参照，对象的可枚举性中顺序。</p>
<p>当然许多特性是类似的。</p>
<ul>
<li>返回的是可遍历的值，<code>enumerable</code> 为 <code>true</code></li>
<li>如果转化的值不是对象，则会先转化为对象。<ul>
<li>字符串会被转为数组输出，</li>
<li>布尔值、数值都不会为实例添加非继承的属性，返回空数组</li>
<li><code>Symbol</code> 作为 <code>key</code> 会被忽略</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objVal = &#123; <span class="number">1</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">7</span>: <span class="string">&#x27;c&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(objVal));</span><br><span class="line"><span class="comment">// [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;]</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>()]: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(obj));</span><br><span class="line"><span class="comment">// [2, 3];</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(str));</span><br><span class="line"><span class="comment">// [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;];</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(<span class="literal">true</span>));</span><br><span class="line"><span class="comment">// []</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(<span class="number">11</span>));</span><br><span class="line"><span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries()"></a>Object.entries()</h3><p><code>Object.entries()</code> 方法返回一个数组，成员是参数对象自身的所有可遍历属性的键值对数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj));</span><br><span class="line"><span class="comment">// [[&quot;x&quot;, 1], [&quot;y&quot;, 2], [&quot;z&quot;, 3]]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对象的属性名是一个 <code>Symbol</code> 值，该属性会被忽略。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; [<span class="built_in">Symbol</span>()]: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj));</span><br><span class="line"><span class="comment">// [[&#x27;x&#x27;, 2]]</span></span><br></pre></td></tr></table></figure>

<h4 id="两个用途"><a href="#两个用途" class="headerlink" title="两个用途"></a>两个用途</h4><ul>
<li>遍历对象的属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [k, v] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`key = <span class="subst">$&#123;k&#125;</span>, val = <span class="subst">$&#123;v&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key = x, val = 1</span></span><br><span class="line"><span class="comment">// key = y, val = 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将对象转为真正的 <a href="">Map 结构</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj));</span><br><span class="line"><span class="built_in">console</span>.log(map);</span><br><span class="line"><span class="comment">// Map &#123; x: 1, y: 2 &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries()"></a>Object.fromEntries()</h2><p><code>Object.fromEntries()</code> 是 <code>Object.entries()</code> 的逆向操作，<strong>用于将一个键值对数组转为对象</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  [<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>],</span><br><span class="line">];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.fromEntries(arr));</span><br><span class="line"><span class="comment">// &#123; x: 1, y: 2, z: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><p>主要作用就是，是将键值对的数据结构还原为对象</p>
<ul>
<li>将 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/9"><code>Map</code> 结构</a>转为对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.set(<span class="string">&#x27;y&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">map.set(<span class="string">&#x27;z&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.fromEntries(map));</span><br><span class="line"><span class="comment">// &#123; x: 1, y: 2, z: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<p>对象的扩展，我们就先介绍到这里，如果有问题，会对文章进行更新。</p>
<p><strong>感谢各位的观看!</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/18/Blog-ES-6-6-%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_avatar.png">
      <meta itemprop="name" content="hzzzzzzzq">
      <meta itemprop="description" content="工作是修心的道场">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/18/Blog-ES-6-6-%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">ES 6 系列之数组的扩展</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-01-18 12:58:12 / 修改时间：13:00:29" itemprop="dateCreated datePublished" datetime="2022-01-18T12:58:12+08:00">2022-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ECMAScript-6/" itemprop="url" rel="index"><span itemprop="name">ECMAScript 6</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>基本使用，扩展运算符是什么，其实就是三个点( <code>...</code> )，在<a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">2. 变量的解构赋值 - 数组</a> 和 <a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/6">4. 函数的扩展 - rest 参数</a>中，接触过。</p>
<p>其实就是讲一个数组转为用逗号分隔的参数序列。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(...arr); <span class="comment">// 1 2 3 4 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(...str); <span class="comment">// H e l l o</span></span><br></pre></td></tr></table></figure>

<p>从上面的代码中，我们能够看出，其实扩展运算符就是拆解数组、字符串等类似结构。</p>
<p>当然，在这里需要注意的是只能拆一层的内容，<strong>如果数组中有对象，或者嵌套了一个数组是不可拆的</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(...arr); <span class="comment">// 1 2 &#123; a: 1 &#125; 4</span></span><br></pre></td></tr></table></figure>

<p>在<strong>对象中使用大多用来拷贝一个对象，并进行部分修改</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">c</span>: &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">3</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 下面的 a: 4,就是对a的值进行修改。</span></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123; ...obj, <span class="attr">a</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj2);</span><br><span class="line"><span class="comment">// a: 4</span></span><br><span class="line"><span class="comment">// b: 2</span></span><br><span class="line"><span class="comment">// c: &#123; x: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="数组新增的方法"><a href="#数组新增的方法" class="headerlink" title="数组新增的方法"></a>数组新增的方法</h2><h3 id="Array-form"><a href="#Array-form" class="headerlink" title="Array.form()"></a>Array.form()</h3><p>该方法用于将<strong>类似数组的对象</strong>和<strong>可遍历的对象</strong>转为真正的数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">&#x27;x&#x27;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;y&#x27;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&#x27;z&#x27;</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">3</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.from(arrayLike);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [&#x27;x&#x27;, &#x27;y&#x27;, &#x27;z&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h3><p>该方法用于<strong>将一组值转化成数组</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h3 id="新增的实例方法"><a href="#新增的实例方法" class="headerlink" title="新增的实例方法"></a>新增的实例方法</h3><h4 id="find-和-findIndex"><a href="#find-和-findIndex" class="headerlink" title="find() 和 findIndex()"></a>find() 和 findIndex()</h4><ul>
<li><strong>find()</strong></li>
</ul>
<p><code>find()</code> 方法，简单来说就是<strong>在数组中找出想要的那个值</strong>。</p>
<p>可以传入三个参数，第一个参数表示，当前值；第二个参数表示，当前值所在数组中的位置；第三个参数表示，原数组。当然，<code>find()</code> 顾名思义，就是查询，会找出第一个返回 <code>true</code> 的成员。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">const</span> value = arr.find(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> val &gt; <span class="number">7</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(value); <span class="comment">// 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 来看看有两个相同值时，返回的是哪个值？</span></span><br><span class="line"><span class="keyword">const</span> value2 = arr.find(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> val &gt; <span class="number">6</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(value2); <span class="comment">// 7</span></span><br></pre></td></tr></table></figure>

<p><code>find()</code> 方法中，可以传递第二个参数，用来绑定 <code>this</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = &#123;</span><br><span class="line">  <span class="attr">first</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">second</span>: <span class="number">20</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> ages = [<span class="number">11</span>, <span class="number">20</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">const</span> value = ages.find(<span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> val &gt; <span class="built_in">this</span>.first;</span><br><span class="line">&#125;, age);</span><br><span class="line"><span class="built_in">console</span>.log(value); <span class="comment">// 11</span></span><br></pre></td></tr></table></figure>

<p>在上面通过参数二传入一个对象，来绑定 <code>this</code>。当然这里可以会有疑问，为什么不用箭头函数了？ 这里具体可以去看看 <a href="">普通函数与箭头函数的 <code>this</code> 指向问题</a>。</p>
<ul>
<li><strong>findIndex()</strong></li>
</ul>
<p><code>findIndex()</code> 方法与 <code>find()</code> 方法非常接近，**返回第一个符合条件的成员的位置(也就是数组的下标)，如果找不到，则返回 <code>-1</code>**。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">const</span> index = arr.findIndex(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">7</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(index); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 来看看两个符合条件值时，返回是第几个的位置？</span></span><br><span class="line"><span class="keyword">const</span> index2 = arr.findIndex(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">6</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(index2); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p><code>findIndex()</code> 方法是可以通过 <code>Objecy.is(NaN)</code> 来识别出 <code>NaN</code> 的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log([<span class="literal">NaN</span>].findIndex(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, val)));</span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h4 id="fill"><a href="#fill" class="headerlink" title="fill()"></a>fill()</h4><p><code>fill</code> 方法使用给定值，<strong>填充一个数组</strong>。</p>
<p>参数可传一共三个</p>
<ul>
<li>第一个参数 - 被填充的值。</li>
<li>第二个、第三个参数 - 用于填充的起始位置和结束位置</li>
</ul>
<p>后两个参数可以不传，视为所有元素都是被填充元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.fill(<span class="number">3</span>)); <span class="comment">// [3, 3, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.fill(<span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// [1, 5, 3]</span></span><br></pre></td></tr></table></figure>

<h4 id="keys-、values-和-entries"><a href="#keys-、values-和-entries" class="headerlink" title="keys()、values() 和 entries()"></a>keys()、values() 和 entries()</h4><p>ES6 提供的新的方法 <strong>用来遍历数组</strong> 。返回的都是一个<strong>遍历器对象</strong>，可以用 <code>for...of</code> 循环进行遍历。</p>
<ul>
<li><strong>keys()</strong></li>
</ul>
<p><code>keys()</code> 实例方法，就是为了<strong>遍历数组的 key</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> arr.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>values()</strong></li>
</ul>
<p><code>values()</code> 实例方法，是为了<strong>遍历数组的值</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> arr.values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 相当于普通的循环遍历</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;z&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>entries()</strong></li>
</ul>
<p><code>entries()</code> 实例方法，<strong>是对键值对的遍历</strong>。 在这里还用到了<a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">数组的解构赋值</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> arr.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &#x27;x&#x27;</span></span><br><span class="line"><span class="comment">// 1 &#x27;y&#x27;</span></span><br><span class="line"><span class="comment">// 2 &#x27;z&#x27;</span></span><br></pre></td></tr></table></figure>

<p>上面代码中的 <code>[key, value]</code>，其实就是遍历 <code>arr.entries()</code> ，并对其中一个值进行<a target="_blank" rel="noopener" href="https://github.com/hzzzzzzzq/Blog/issues/4">解构赋值</a>。</p>
<p>可以来看看不使用 <code>for...of</code> 的写法，需要自己<strong>手动调用遍历器对象的 <code>next</code> 方法，然后<code>.value</code> 去取到相应值</strong>，为了方便这里就写在一起了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="comment">// keys()</span></span><br><span class="line"><span class="keyword">let</span> keys = arr.keys();</span><br><span class="line"><span class="built_in">console</span>.log(keys.next().value); <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(keys.next().value); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(keys.next().value); <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// values()</span></span><br><span class="line"><span class="keyword">let</span> values = arr.values();</span><br><span class="line"><span class="built_in">console</span>.log(values.next().value); <span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(values.next().value); <span class="comment">// &#x27;y&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(values.next().value); <span class="comment">// &#x27;z&#x27;</span></span><br><span class="line"><span class="comment">// entries()</span></span><br><span class="line"><span class="keyword">let</span> entries = arr.entries();</span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [0, &#x27;x&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [1, &#x27;y&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [2, &#x27;z&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h4><p><code>includes()</code> 实例方法，就是用来做一个判断，表示<strong>某个数组是否包含给定过的值</strong>，与字符串的 <code>includes</code> 方法类似。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="literal">undefined</span>, <span class="literal">NaN</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="string">&#x27;x&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="string">&#x27;1&#x27;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="literal">undefined</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="literal">NaN</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><code>includes()</code> 方法的第二个参数表示<strong>搜索的起始位置</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="literal">undefined</span>, <span class="literal">NaN</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="string">&#x27;x&#x27;</span>, <span class="number">1</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>上面的例子表示，检索数组从下标 <code>1</code> 开始检索，所以第一个参数 <code>&#39;x&#39;</code>，就检索不到啦。</p>
<h4 id="flat-flatMap"><a href="#flat-flatMap" class="headerlink" title="flat(),flatMap()"></a>flat(),flatMap()</h4><ul>
<li><strong>flat()</strong></li>
</ul>
<p><code>flat()</code> 就是简单来说就是 <strong>数组的扁平化</strong>，如果数组内嵌套数组，那就可以将其转为单层数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>]];</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat()); <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<p>当然，默认情况下，只会偏平一层，如果传入参数就可以偏平自己需要的层数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, [<span class="number">5</span>]]]];</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat()); <span class="comment">// [1, 2, 3, [4, [5]]]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.flat(<span class="number">2</span>)); <span class="comment">// [1, 2, 3, 4, [5]]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.flat(<span class="number">3</span>)); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>如果你需要无论多少层都将其转化为一层，使用<code>正无穷(Infinity)</code>作为参数即可。</p>
<p>如果数组有<strong>空位</strong>，<code>flat()</code> 函数则会将空位跳过</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, [<span class="number">5</span>, [<span class="number">6</span>]]]]]];</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat(<span class="literal">Infinity</span>)); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, , <span class="number">3</span>, , <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(array.flat()); <span class="comment">// [1, 3, 5]</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>flatMap()</strong></li>
</ul>
<p><code>flatMap()</code> 实例方法，可以理解为，对数组进行 <code>map</code> 操作，然后对返回值组成的数组执行 <code>flat()</code> 方法。该实例方法，返回一个新的数组，不会改变原数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>]];</span><br><span class="line"><span class="keyword">let</span> array = arr.flatMap(<span class="function">(<span class="params">item</span>) =&gt;</span> item * <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>该方法只能展开一层，无法多层展开，有兴趣的，可以去验证一下。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hzzzzzzzq</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">50k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">46 分钟</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
